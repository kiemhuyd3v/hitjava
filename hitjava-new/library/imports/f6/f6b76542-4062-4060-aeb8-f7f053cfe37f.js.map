{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Lobby.BoxLixi.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport Configs from \"../../Loading/src/Configs\";\nimport Http from \"../../Loading/src/Http\";\nimport App from \"./Script/common/App\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class BoxLixi extends cc.Component {\n\n    @property(cc.Label)\n    lbTime: cc.Label = null;\n    isMove = false;\n    distance: number = 0;\n\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n    //    this.node.on(cc.Node.EventType.TOUCH_MOVE, (touch) => {\n    //        this.node.setPosition(this.node.getPosition().add(touch.getDelta()));\n    //        this.distance += Math.abs(touch.getDelta().x) + Math.abs(touch.getDelta().y);\n    //        if (this.distance >= 70) {\n    //            this.isMove = true;\n    //        }\n    //    });\n        this.node.on(cc.Node.EventType.TOUCH_END, (touch) => {\n            if (!this.isMove) {\n                App.instance.actShowPopupRuleLixi();\n            }\n            this.isMove = false;\n        });\n    }\n\n    start() {\n        if (App.instance.timeLixi > 0) {\n            this.setCountDown();\n        } else if (App.instance.timeLixi == 0) {\n            this.lbTime.string = \"Đang diễn ra\";\n        }\n    }\n    getInfo() {\n        Http.get(Configs.App.API, { \"c\": 2036, \"nn\": Configs.Login.Nickname, \"at\": Configs.Login.AccessToken, \"ac\": \"time\" }, (err, res) => {\n            if (err) {\n                return;\n            } else {\n                //  cc.log(res);\n                if (res['data'] != null) {\n                    App.instance.timeLixi = res['data']['countTime'];\n                    this.setCountDown();\n                } else if (res['success']) {// dang trong time su kien\n                    this.lbTime.string = \"Đang diễn ra\";\n                    if (res[\"errorCode\"] == \"0\") {\n                        App.instance.actGetEventLixi();\n                    } else {\n                        App.instance.ShowAlertDialog(res['message']);\n                    }\n\n                }\n            }\n        });\n    }\n    setCountDown() {\n        if (App.instance.timeLixi > 0) {\n            this.schedule(() => {\n                let timeRemainSec = App.instance.timeLixi;\n                if (timeRemainSec > 3600) {\n                    let hour = Math.floor(timeRemainSec / 3600) > 9 ? Math.floor(timeRemainSec / 3600) : \"0\" + Math.floor(timeRemainSec / 3600);\n                    let minutes = Math.floor((timeRemainSec % 3600) / 60) > 9 ? Math.floor((timeRemainSec % 3600) / 60) : \"0\" + Math.floor((timeRemainSec % 3600) / 60);\n                    let seccond = Math.floor((timeRemainSec % 3600) % 60) > 9 ? Math.floor((timeRemainSec % 3600) % 60) : \"0\" + Math.floor((timeRemainSec % 3600) % 60);\n                    this.lbTime.string = cc.js.formatStr(\"%s:%s:%s\", hour, minutes, seccond);\n                } else if (timeRemainSec > 60) {\n                    let minutes = Math.floor((timeRemainSec % 3600) / 60) > 9 ? Math.floor((timeRemainSec % 3600) / 60) : \"0\" + Math.floor((timeRemainSec % 3600) / 60);\n                    let seccond = Math.floor((timeRemainSec % 3600) % 60) > 9 ? Math.floor((timeRemainSec % 3600) % 60) : \"0\" + Math.floor((timeRemainSec % 3600) % 60);\n                    this.lbTime.string = cc.js.formatStr(\"%s:%s\", minutes, seccond);\n                } else if (timeRemainSec == 0) {\n                    this.unscheduleAllCallbacks();\n                    // this.getInfo();\n                    App.instance.actGetEventLixi();\n                }\n                App.instance.timeLixi--;\n            }, 1.0, cc.macro.REPEAT_FOREVER, 0.1);\n        } else if (App.instance.timeLixi == 0) {\n            this.unscheduleAllCallbacks();\n            App.instance.actGetEventLixi();\n\n        }\n\n    }\n\n    // update (dt) {}\n}\n"]}
{"version":3,"sources":["assets\\XocDia\\XocDiaScript\\XocDia.PanelPayDoor.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Utils from \"../../Lobby/LobbyScript/Script/common/Utils\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PanelPayDoor extends cc.Component {\n\n    @property(cc.Label)\n    title1: cc.Label = null;\n    @property(cc.Label)\n    title2: cc.Label = null;\n    @property(cc.Node)\n    itemTemplate: cc.Node = null;\n    @property(cc.Slider)\n    slider: cc.Slider = null;\n    @property(cc.Sprite)\n    sprProgress: cc.Sprite = null;\n    @property(cc.Label)\n    lblCoin: cc.Label = null;\n\n    public coin = 1;\n    private minCoin = 1;\n    private maxCoin = 0;\n\n    start() {\n        this.slider.node.on(\"slide\", () => {\n            this.updateValue();\n        });\n    }\n\n    public show(action: number, maxCoin: number) {\n        if (action == 2) {\n            this.title1.string = this.title2.string = \"MUA CHẴN\";\n        } else {\n            this.title1.string = this.title2.string = \"MUA LẺ\";\n        }\n        this.coin = this.minCoin;\n        this.maxCoin = maxCoin;\n        this.node.active = true;\n        this.itemTemplate.active = false;\n        for (let i = 1; i < this.itemTemplate.parent.childrenCount; i++) {\n            this.itemTemplate.parent.children[i].destroy();\n        }\n        this.slider.progress = 1;\n        this.sprProgress.fillRange = 1;\n        this.updateValue();\n    }\n\n    public addUser(nickname: string, coin: number, newMaxCoin: number) {\n        if (newMaxCoin == 0) {\n            this.node.active = false;\n        }\n        this.maxCoin = newMaxCoin;\n        if (this.coin > this.maxCoin) {\n            this.coin = this.maxCoin;\n        }\n        this.slider.progress = this.coin / (this.maxCoin - this.minCoin);\n        this.sprProgress.fillRange = this.slider.progress;\n        this.lblCoin.string = Utils.formatNumber(this.coin);\n\n        let item = cc.instantiate(this.itemTemplate);\n        item.parent = this.itemTemplate.parent;\n        item.getChildByName(\"lblNickname\").getComponent(cc.Label).string = nickname;\n        item.getChildByName(\"lblCoin\").getComponent(cc.Label).string = Utils.formatMoney(coin);\n        item.active = true;\n    }\n\n    public getCoin(): number {\n        return this.coin;\n    }\n\n    private updateValue() {\n        this.sprProgress.fillRange = this.slider.progress;\n        this.coin = this.minCoin + Math.round((this.maxCoin - this.minCoin) * this.slider.progress);\n        this.lblCoin.string = Utils.formatMoney(this.coin);\n    }\n}\n"]}
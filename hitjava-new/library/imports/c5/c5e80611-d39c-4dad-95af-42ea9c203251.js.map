{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Lobby.PopupLuckyWheel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Configs from \"../../Loading/src/Configs\";\nimport cmd from \"./Lobby.Cmd\";\nimport App from \"./Script/common/App\";\nimport BroadcastReceiver from \"./Script/common/BroadcastReceiver\";\nimport Dialog from \"./Script/common/Dialog\";\nimport MiniGameNetworkClient from \"./Script/networks/MiniGameNetworkClient\";\nimport InPacket from \"./Script/networks/Network.InPacket\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PopupLuckyWheel extends Dialog {\n    @property(cc.Node)\n    wheel1: cc.Node = null;\n    @property(cc.Node)\n    wheel3: cc.Node = null;\n    @property(cc.Label)\n    lblCount: cc.Label = null;\n    @property(cc.Button)\n    btnClose: cc.Button = null;\n    @property(cc.Button)\n    btnSpin: cc.Button = null;\n\n    private spinCount = 0;\n\n    start() {\n        MiniGameNetworkClient.getInstance().addListener((data) => {\n            if (!this.node.active) return;\n\n            let inPacket = new InPacket(data);\n            switch (inPacket.getCmdId()) {\n                case cmd.Code.SPIN_LUCKY_WHEEL: {\n                    let res = new cmd.ResSpinLuckyWheel(data);\n                    //  //Utils.Log(res);\n\n                    if (res.error != 0) {\n                        switch (res.error) {\n                            case 1:\n                                App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_check_connect'));\n                                break;\n                            case 2:\n                                App.instance.alertDialog.showMsg(\"Bạn đã hết lượt quay.\");\n                                break;\n                            case 3:\n                                App.instance.alertDialog.showMsg(\"Mỗi ngày chỉ được quay tối đa 2 lần!\");\n                                break;\n                        }\n                        this.btnSpin.interactable = true;\n                        this.btnClose.interactable = true;\n                        break;\n                    }\n                    this.spinCount -= 1;\n                    this.lblCount.string = this.spinCount.toString();\n\n                    Configs.Login.LuckyWheel = res.remainCount;\n                    Configs.Login.Coin = res.currentMoneyVin;\n\n                    let msg = \"Chúc mừng bạn đã nhận được\\n\";\n                    let rotateToIdx1 = 3;\n                    switch (res.prizeSlot) {\n                        case \"KhoBau1\":\n                            rotateToIdx1 = 2;\n                            msg += \"1 lượt quay Range Rover\";\n                            break;\n                        case \"KhoBau2\":\n                            rotateToIdx1 = 6;\n                            msg += \"2 lượt quay Range Rover\";\n                            break;\n                        case \"KhoBau3\":\n                            rotateToIdx1 = 11;\n                            msg += \"3 lượt quay Range Rover\";\n                            break;\n                        case \"NuDiepVien1\":\n                            rotateToIdx1 = 0;\n                            msg += \"1 lượt quay MayBach\";\n                            break;\n                        case \"NuDiepVien2\":\n                            rotateToIdx1 = 10;\n                            msg += \"2 lượt quay MayBach\";\n                            break;\n                        case \"NuDiepVien3\":\n                            rotateToIdx1 = 4;\n                            msg += \"3 lượt quay MayBach\";\n                            break;\n                        case \"SieuAnhHung1\":\n                            rotateToIdx1 = 5;\n                            msg += \"1 lượt quay Bentley\";\n                            break;\n                        case \"SieuAnhHung2\":\n                            rotateToIdx1 = 1;\n                            msg += \"1 lượt quay Bentley\";\n                            break;\n                        case \"SieuAnhHung3\":\n                            rotateToIdx1 = 8;\n                            msg += \"1 lượt quay Bentley\";\n                            break;\n                        case \"more\":\n                            rotateToIdx1 = 9;\n                            msg += \"thêm 1 lượt quay\";\n                            break;\n                    }\n\n                    if (rotateToIdx1 != 3) msg += \"và \";\n\n                    let rotateToIdx3 = 1;\n                    switch (res.prizeVin) {\n                        case \"1000\":\n                            rotateToIdx3 = 7;\n                            msg += \"1.000 Xu\";\n                            break;\n                        case \"2000\":\n                            rotateToIdx3 = 5;\n                            msg += \"2.000 Xu\";\n                            break;\n                        case \"5000\":\n                            rotateToIdx3 = 3;\n                            msg += \"5.000 Xu\";\n                            break;\n                        case \"10000\":\n                            rotateToIdx3 = 6;\n                            msg += \"10.000 Xu\";\n                            break;\n                        case \"20000\":\n                            rotateToIdx3 = 2;\n                            msg += \"20.000 Xu\";\n                            break;\n                        case \"50000\":\n                            rotateToIdx3 = 4;\n                            msg += \"50.000 Xu\";\n                            break;\n                        case \"100000\":\n                            rotateToIdx3 = 0;\n                            msg += \"100.000 Xu\";\n                            break;\n                        default:\n                            break;\n                    }\n                    msg += \".\";\n                    if (rotateToIdx3 == 1 && rotateToIdx1 == 3) {\n                        msg = \"Chúc bạn may mắn lần sau.\";\n                    }\n\n                    this.wheel1.stopAllActions();\n                    this.wheel3.stopAllActions();\n                    this.wheel1.angle = 0;\n                    this.wheel3.angle = 0;\n                    this.wheel1.runAction(cc.rotateTo(3, -(360 * 4 + (360 - 360 / 12 * rotateToIdx1) - 360 / 12 / 2)).easing(cc.easeSineInOut()));\n                    this.wheel3.runAction(cc.sequence(\n                        cc.delayTime(0.25),\n                        cc.rotateTo(4, 360 * 4 + 360 / 8 * rotateToIdx3 + 360 / 8 / 2).easing(cc.easeSineInOut()),\n                        cc.callFunc(() => {\n                            this.btnSpin.interactable = true;\n                            this.btnClose.interactable = true;\n                            this.spinCount = Configs.Login.LuckyWheel;\n                            this.lblCount.string = this.spinCount.toString();\n                            BroadcastReceiver.send(BroadcastReceiver.USER_UPDATE_COIN);\n                            App.instance.alertDialog.showMsg(msg);\n                        })\n                    ));\n                    break;\n                }\n            }\n        }, this);\n    }\n\n    show() {\n        super.show();\n        this.wheel1.angle = 0;\n        this.wheel3.angle = 0;\n        this.spinCount = Configs.Login.LuckyWheel;\n        this.lblCount.string = this.spinCount.toString();\n    }\n\n    dismiss() {\n        super.dismiss();\n    }\n\n    actSpin() {\n        this.btnSpin.interactable = false;\n        this.btnClose.interactable = false;\n        MiniGameNetworkClient.getInstance().send(new cmd.ReqSpinLuckyWheel());\n    }\n}\n"]}
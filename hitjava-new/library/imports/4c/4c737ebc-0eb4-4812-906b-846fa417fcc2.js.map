{"version":3,"sources":["assets\\Loading\\Add-on\\DropDown\\Script\\DropDown.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,2DAAsD;AACtD,+CAA0C;AAEpC,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAsC,4BAAY;IAAlD;QAAA,qEAsPC;QApPS,cAAQ,GAAY,SAAS,CAAC;QAE9B,kBAAY,GAAa,SAAS,CAAC;QAEnC,mBAAa,GAAc,SAAS,CAAC;QAErC,eAAS,GAAa,SAAS,CAAC;QAEhC,gBAAU,GAAc,SAAS,CAAC;QAGlC,iBAAW,GAAyB,EAAE,CAAC;QAGvC,mBAAa,GAAY,KAAK,CAAC;QAC/B,WAAK,GAAmB,EAAE,CAAC;QAC1B,YAAM,GAAY,KAAK,CAAC;QAEzB,oBAAc,GAAW,CAAC,CAAC,CAAC;;IAkOtC,CAAC;IAjOE,sBAAW,mCAAa;aAAxB;YACK,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aACF,UAAyB,KAAa;YACjC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC7B,CAAC;;;OAJA;IAMM,iCAAc,GAArB,UAAsB,WAAiC;QAAvD,iBAKC;QAJG,WAAW,IAAI,WAAW,CAAC,OAAO,CAAC,UAAA,IAAI;YACnC,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC7B,CAAC;IAEM,mCAAgB,GAAvB;QACI,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,GAAG,IAAI,KAAK,EAAE,CAAC;QAC/B,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC7B,CAAC;IAEM,uBAAI,GAAX;QACI,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YACrB,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;gBAAE,OAAO;aAAE;SACvC;QACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAEnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACxD,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,eAAe,CAAC;QACtC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAE/C,IAAI,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,sBAAsB,CAAe,sBAAY,CAAC,CAAC;QACrF,IAAI,OAAO,GAAG,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC;QACvC,YAAY,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAEhC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACxB,KAAI,IAAI,CAAC,GAAE,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAC;YACtD,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,IAAI,GAAkB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,IAAI,IAAI,CAAC,aAAa,EAAE,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YAChG,IAAG,CAAC,IAAI,EAAC;gBACL,SAAS;aACZ;YACD,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC;YAChD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;YACzD,+BAA+B;YAC/B,wCAAwC;YACxC,IAAI;SACP;QACD,YAAY,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAEjC,OAAO,CAAC,MAAM,GAAG,YAAY,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;IACxE,CAAC;IAEK,0BAAO,GAAd,UAAe,IAAwB,EAAE,QAAiB,EAAE,YAA0B,EAAE,aAA6B;QAChH,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;QACzC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC9C,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,WAAQ,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAA,CAAC,CAAA,IAAI,CAAC,YAAY,CAAA,CAAC,CAAA,EAAE,CAAE,CAAC;QACtF,IAAG,IAAI,CAAC,MAAM,EAAC;YACX,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC;SACjC;QACD,IAAG,IAAI,CAAC,KAAK,EAAC;YACV,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC;SACzC;QACD,IAAG,IAAI,CAAC,MAAM,EAAC;YACX,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC;YACxC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,IAAI,SAAS,CAAC;SACpD;QACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtB,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,uBAAI,GAAX;QACI,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAG,IAAI,CAAC,SAAS,IAAI,SAAS,EAAC;YAC3B,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,CAAC;SACzC;IACL,CAAC;IAEW,6CAA0B,GAAvC,UAAwC,KAAa;;;;gBAEhD,wCAAwC;gBACxC,cAAc;gBACd,KAAS,CAAC,GAAG,CAAC,EAAE,GAAG,GAAE,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EACpD;oBACI,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,SAAS;wBAC1B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;iBACvC;gBACD,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACxB,IAAI,IAAI,CAAC,SAAS,IAAI,SAAS;oBAC3B,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC7C,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;;;;KAC9B;IAEK,8BAAW,GAAlB,UAAmB,IAAI;IAEtB,CAAC;IAED,gBAAgB;IACV,gCAAa,GAApB;QACK,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAE3B,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,EAAE,CAAC,KAAK,CAAC,uJAAuJ,CAAC,CAAC;YAClK,OAAO;SACV;QACD,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;QAC5B,IAAI,UAAU,GAAc,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAY,EAAE,CAAC,MAAM,CAAC,CAAC;QACvF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,OAAO;QACP,IAAI,CAAC,UAAU,IAAI,UAAU,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjD,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,EAAE,CAAC,KAAK,CAAC,sHAAsH,CAAC,CAAC;SACpI;aAAM,IAAI,IAAI,CAAC,SAAS,IAAI,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YACvF,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,EAAE,CAAC,KAAK,CAAC,gGAAgG,CAAC,CAAC;SAC9G;aAAM,IAAI,IAAI,CAAC,UAAU,IAAI,SAAS,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YACzF,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,EAAE,CAAC,KAAK,CAAC,iGAAiG,CAAC,CAAC;SAC/G;QAED,IAAI,CAAC,IAAI,CAAC,aAAa,EACvB;YACI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;YAC7B,OAAO;SACV;QACD,IAAI,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,YAAY,CAAe,sBAAY,CAAC,CAAC;QACpE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC;QAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC;QAE5B,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED,YAAY;IACN,oCAAiB,GAAxB;QACK,IAAG,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,CAAC,EAAC;YAC5B,OAAO;SACV;QACD,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,GAAE,CAAC,CAAC,CAAC,CAAC;QAC3F,IAAG,IAAI,CAAC,YAAY,EAAC;YACjB,IAAG,IAAI,IAAI,IAAI,CAAC,YAAY,EAAC;gBACzB,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC;aAChD;iBAAI;gBACD,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,EAAE,CAAC;aACjC;SACJ;QACD,IAAG,IAAI,CAAC,aAAa,EAAC;YAClB,IAAG,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAC;gBACrB,IAAI,CAAC,aAAa,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC;aAClD;iBAAI;gBACD,IAAI,CAAC,aAAa,CAAC,WAAW,GAAG,SAAS,CAAC;aAC9C;YACD,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,IAAI,SAAS,CAAC;SAC5E;IACL,CAAC;IAES,qCAAkB,GAA5B,UAA6B,QAAiB;QAC1C,OAAO,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;IACpC,CAAC;IAES,sCAAmB,GAA7B,UAA8B,YAAqB;QAC/C,YAAY,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAES,6BAAU,GAApB,UAAqB,YAA0B;QAC3C,IAAI,OAAO,GAAG,EAAE,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAChD,OAAO,OAAO,CAAC,YAAY,CAAe,sBAAY,CAAC,CAAC;IAC5D,CAAC;IAED,iBAAiB;IACX,iCAAc,GAArB,UAAsB,MAAiB;QAClC,IAAI,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAE,MAAM,CAAC,aAAa,EAAE,CAAC,EAAE,EACxC;YACI,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,IAAI,EACrC;gBACI,8CAA8C;gBAC9C,IAAI,CAAC,aAAa,GAAG,CAAC,GAAG,CAAC,CAAC;gBAC3B,MAAM;aACT;SACJ;QACL,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,EACxB;YACI,IAAI,CAAC,QAAQ,CAAE,IAAI,CAAC,aAAa,CAAC,CAAC;SACtC;IACL,CAAC;IAED,8BAAW,GAAX,UAAY,QAAQ;QAEhB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC7B,CAAC;IAGK,0BAAO,GAAd;QACK,IAAG,CAAC,IAAI,CAAC,MAAM,EAAC;YACZ,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;aAAI;YACD,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;IACL,CAAC;IAED,wBAAK,GAAL;QACI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC7B,CAAC;IAED,2BAAQ,GAAR;QACI,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACjD,CAAC;IAED,4BAAS,GAAT;QACI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAClD,CAAC;IAEK,wBAAK,GAAZ,UAAa,KAAa,EAAE,GAAW,EAAE,GAAW;QAC/C,IAAG,KAAK,GAAG,GAAG;YAAE,OAAO,GAAG,CAAC;QAC3B,IAAG,KAAK,GAAG,GAAG;YAAE,OAAO,GAAG,CAAC;QAC3B,OAAO,KAAK,CAAC;IACjB,CAAC;IAnPF;QADE,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACkB;IAErC;QADE,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;kDACsB;IAE1C;QADE,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;mDACuB;IAE5C;QADE,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACmB;IAEvC;QADE,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;gDACoB;IAGzC;QADE,QAAQ,CAAC,CAAC,4BAAkB,CAAC,CAAC;iDACc;IAb5B,QAAQ;QAD5B,OAAO,EAAE;OACW,QAAQ,CAsP5B;IAAD,eAAC;CAtPD,AAsPC,CAtPqC,EAAE,CAAC,SAAS,GAsPjD;kBAtPoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import DropDownOptionData from \"./DropDownOptionData\";\nimport DropDownItem from \"./DropDownItem\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass()\nexport default class DropDown extends cc.Component {\n    @property(cc.Node)\n   public template: cc.Node = undefined;\n    @property(cc.Label)\n   public labelCaption: cc.Label = undefined;\n    @property(cc.Sprite)\n   public spriteCaption: cc.Sprite = undefined;\n    @property(cc.Label)\n   public labelItem: cc.Label = undefined;\n    @property(cc.Sprite)\n   public spriteItem: cc.Sprite = undefined;\n\n    @property([DropDownOptionData])\n   public optionDatas: DropDownOptionData[] = [];\n    \n   public _dropDown: cc.Node;\n   public validTemplate: boolean = false;\n   public items: DropDownItem[] = [];\n    public isShow: boolean = false;\n\n   public _selectedIndex: number =Â -1;\n   public get selectedIndex(): number{\n        return this._selectedIndex;\n    }\n   public set selectedIndex(value: number){\n        this._selectedIndex = value;\n        this.refreshShownValue();\n    }\n\n    public addOptionDatas(optionDatas: DropDownOptionData[]) {\n        optionDatas && optionDatas.forEach(data=>{\n            this.optionDatas.push(data);\n        });\n        this.refreshShownValue();\n    }\n\n    public clearOptionDatas(){\n        cc.js.clear(this.optionDatas);\n        this.optionDatas = new Array();\n        this.refreshShownValue();\n    }\n\n    public show() {\n        if (!this.validTemplate) {\n            this.setUpTemplate();\n            if (!this.validTemplate) { return; }\n        }\n        this.isShow = true;\n\n        this._dropDown = this.createDropDownList(this.template);\n        this._dropDown.name = \"DropDown List\";\n        this._dropDown.active = true;\n        this._dropDown.setParent(this.template.parent);\n\n        let itemTemplate = this._dropDown.getComponentInChildren<DropDownItem>(DropDownItem);\n        let content = itemTemplate.node.parent;\n        itemTemplate.node.active = true;\n\n        cc.js.clear(this.items);\n        for(let i =0, len = this.optionDatas.length; i < len; i++){\n            let data = this.optionDatas[i];\n            let item : DropDownItem = this.addItem(data, i == this.selectedIndex, itemTemplate, this.items);\n            if(!item){\n                continue;\n            }\n            item.toggle.isChecked = i == this.selectedIndex;\n            item.toggle.node.on(\"toggle\", this.onSelectedItem, this);\n            // if(i == this.selectedIndex){\n            //     this.onSelectedItem(item.toggle);\n            // }\n        }\n        itemTemplate.node.active = false;\n\n        content.height = itemTemplate.node.height * this.optionDatas.length;\n    }\n\n   public addItem(data: DropDownOptionData, selected: boolean, itemTemplate: DropDownItem, dropDownItems: DropDownItem[]): DropDownItem{\n        let item = this.createItem(itemTemplate);\n        item.node.setParent(itemTemplate.node.parent);\n        item.node.active = true;\n        item.node.name = `item_${this.items.length + data.optionString?data.optionString:\"\"}`;\n        if(item.toggle){\n            item.toggle.isChecked = false;\n        } \n        if(item.label){\n            item.label.string = data.optionString;\n        }\n        if(item.sprite){\n            item.sprite.spriteFrame = data.optionSf;\n            item.sprite.enabled = data.optionSf != undefined;\n        }\n        this.items.push(item);\n        return item;\n    }\n\n    public hide() {\n        this.isShow = false;\n        if(this._dropDown != undefined){\n            this.delayedDestroyDropdownList(0.15);\n        }\n    }\n\n   public async delayedDestroyDropdownList(delay: number)\n    {\n        // await WaitUtil.waitForSeconds(delay);\n        // wait delay;\n        for (let i = 0, len= this.items.length; i < len; i++)\n        {\n            if (this.items[i] != undefined)\n                this.destroyItem(this.items[i]);\n        }\n        cc.js.clear(this.items);\n        if (this._dropDown != undefined)\n            this.destroyDropDownList(this._dropDown);\n        this._dropDown = undefined;\n    }\n\n   public destroyItem(item){\n\n    }\n\n    // è®¾ç½®æ¨¡æ¿ï¼æ¹ä¾¿åé¢item\n   public setUpTemplate() {\n        this.validTemplate = false;\n\n        if (!this.template) {\n            cc.error(\"The dropdown template is not assigned. The template needs to be assigned and must have a child GameObject with a Toggle component serving as the item\");\n            return;\n        }\n        this.template.active = true;\n        let itemToggle: cc.Toggle = this.template.getComponentInChildren<cc.Toggle>(cc.Toggle);\n        this.validTemplate = true;\n        // ä¸äºå¤æ­\n        if (!itemToggle || itemToggle.node == this.template) {\n            this.validTemplate = false;\n            cc.error(\"The dropdown template is not valid. The template must have a child Node with a Toggle component serving as the item.\");\n        } else if (this.labelItem != undefined && !this.labelItem.node.isChildOf(itemToggle.node)) {\n            this.validTemplate = false;\n            cc.error(\"The dropdown template is not valid. The Item Label must be on the item Node or children of it.\");\n        } else if (this.spriteItem != undefined && !this.spriteItem.node.isChildOf(itemToggle.node)) {\n            this.validTemplate = false;\n            cc.error(\"The dropdown template is not valid. The Item Sprite must be on the item Node or children of it.\");\n        }\n\n        if (!this.validTemplate)\n        {\n            this.template.active = false;\n            return;\n        }\n        let item = itemToggle.node.addComponent<DropDownItem>(DropDownItem);\n        item.label = this.labelItem;\n        item.sprite = this.spriteItem;\n        item.toggle = itemToggle;\n        item.node = itemToggle.node;\n\n        this.template.active = false;\n        this.validTemplate = true;\n    }\n\n    // å·æ°æ¾ç¤ºçéä¸­ä¿¡æ¯\n   public refreshShownValue(){\n        if(this.optionDatas.length <= 0){\n            return;\n        }\n        let data = this.optionDatas[this.clamp(this.selectedIndex, 0, this.optionDatas.length -1)];\n        if(this.labelCaption){\n            if(data && data.optionString){\n                this.labelCaption.string = data.optionString;\n            }else{\n                this.labelCaption.string = \"\";\n            }\n        }\n        if(this.spriteCaption){\n            if(data && data.optionSf){\n                this.spriteCaption.spriteFrame = data.optionSf;\n            }else{\n                this.spriteCaption.spriteFrame = undefined;\n            }\n            this.spriteCaption.enabled = this.spriteCaption.spriteFrame != undefined;\n        }\n    }\n\n    protected createDropDownList(template: cc.Node):  cc.Node {\n        return cc.instantiate(template);\n    }\n\n    protected destroyDropDownList(dropDownList: cc.Node){\n        dropDownList.destroy();\n    }\n\n    protected createItem(itemTemplate: DropDownItem): DropDownItem{\n        let newItem = cc.instantiate(itemTemplate.node);\n        return newItem.getComponent<DropDownItem>(DropDownItem);\n    }\n\n    /** å½toggleè¢«éä¸­ */\n   public onSelectedItem(toggle: cc.Toggle) {\n        let parent = toggle.node.parent;\n        for (let i = 0; i <parent.childrenCount; i++)\n            {\n                if (parent.children[i] == toggle.node)\n                {\n                    // Subtract one to account for template child.\n                    this.selectedIndex = i - 1;\n                    break;\n                }\n            }\n        this.hide();\n        if(this.callback != null)\n        {\n            this.callback( this.selectedIndex);\n        }\n    }\n   public callback: Function;\n    setCallBack(callback)\n    {\n        this.callback = callback;\n    }\n\n\n   public onClick() {\n        if(!this.isShow){\n            this.show();\n        }else{\n            this.hide();\n        }\n    }\n\n    start(){\n        this.template.active = false;\n        this.refreshShownValue();\n    }\n\n    onEnable() {\n        this.node.on(\"touchend\", this.onClick, this);\n    }\n\n    onDisable() {\n        this.node.off(\"touchend\", this.onClick, this);\n    }\n\n   public clamp(value: number, min: number, max: number): number{\n        if(value < min) return min;\n        if(value > max) return max;\n        return value;\n    }\n}\n"]}
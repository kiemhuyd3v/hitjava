{"version":3,"sources":["assets\\TaiXiuDouble\\TaiXiuScript\\TaiXiu1\\TaiXiuMini.PopupHonors.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Configs from \"../../../Loading/src/Configs\";\nimport Http from \"../../../Loading/src/Http\";\nimport App from \"../../../Lobby/LobbyScript/Script/common/App\";\nimport Dialog from \"../../../Lobby/LobbyScript/Script/common/Dialog\";\nimport ScrollViewControl from \"../../../Lobby/LobbyScript/Script/common/ScrollViewControl\";\nimport Utils from \"../../../Lobby/LobbyScript/Script/common/Utils\";\n\n\nconst { ccclass, property } = cc._decorator;\n\nnamespace taixiumini {\n    @ccclass\n    export class PopupHonors extends Dialog {\n        @property(cc.Node)\n        itemTemplate: cc.Node = null;\n        @property([cc.SpriteFrame])\n        sprRank: cc.SpriteFrame[] = [];\n        private items = new Array<cc.Node>();\n        @property(ScrollViewControl)\n        scrView: ScrollViewControl = null;\n        private dataList = [];\n\n        show() {\n            super.show();\n            App.instance.showBgMiniGame(\"TaiXiu\");\n            for (let i = 0; i < this.items.length; i++) {\n                this.items[i].active = false;\n            }\n            if (this.itemTemplate != null) this.itemTemplate.active = false;\n\n\n        }\n\n        dismiss() {\n            super.dismiss();\n            for (let i = 0; i < this.items.length; i++) {\n                this.items[i].active = false;\n            }\n        }\n\n        _onShowed() {\n            super._onShowed();\n            this.loadData();\n        }\n\n        private loadData() {\n            App.instance.showLoading(true);\n            Http.get(Configs.App.API, { \"c\": 101, \"mt\": Configs.App.MONEY_TYPE, \"txType\": 1 }, (err, res) => {\n                App.instance.showLoading(false);\n                if (err != null) return;\n                if (res[\"success\"]) {\n                    //  cc.log(\"VINH DANH TAI XIU:\", res);\n                    this.dataList = res[\"topTX\"].slice();\n                    // if (this.items.length == 0) {\n                    //     for (var i = 0; i < 20; i++) {\n                    //         let item = cc.instantiate(this.itemTemplate);\n                    //         item.parent = this.itemTemplate.parent;\n                    //         this.items.push(item);\n                    //     }\n                    //     this.itemTemplate.destroy();\n                    //     this.itemTemplate = null;\n                    // }\n                    let cb = (item, itemData) => {\n                        item.getChildByName(\"bg\").opacity = item['itemID'] % 2 == 0 ? 255 : 0;\n\n                        item.getChildByName(\"lblRank\").getComponent(cc.Label).string = (item['itemID'] + 1).toString();\n                        item.getChildByName(\"lblAccount\").getComponent(cc.Label).string = itemData[\"username\"];\n                        item.getChildByName(\"lblWin\").getComponent(cc.Label).string = Utils.formatNumber(itemData[\"money\"]);\n                        if (item['itemID'] < 3) {\n                            item.getChildByName(\"ic_rank\").active = true;\n                            item.getChildByName(\"lblRank\").active = false;\n                            item.getChildByName(\"ic_rank\").getComponent(cc.Sprite).spriteFrame = this.sprRank[itemData['index']];\n                        } else {\n                            item.getChildByName(\"ic_rank\").active = false;\n                            item.getChildByName(\"lblRank\").active = true;\n                        }\n                        item.active = true;\n                    };\n                    this.scrView.setDataList(cb, this.dataList);\n                    // for (let i = 0; i < this.items.length; i++) {\n                    //     let item = this.items[i];\n                    //     if (i < res[\"topTX\"].length) {\n                    //         let itemData = res[\"topTX\"][i];\n                    //         item.getChildByName(\"bg\").opacity = i % 2 == 0 ? 255 : 0;\n                    //         item.getChildByName(\"lblRank\").getComponent(cc.Label).string = (i + 1).toString();\n                    //         item.getChildByName(\"lblAccount\").getComponent(cc.Label).string = itemData[\"username\"];\n                    //         item.getChildByName(\"lblWin\").getComponent(cc.Label).string = Utils.formatNumber(itemData[\"money\"]);\n                    //         if (i < 3) {\n                    //             item.getChildByName(\"ic_rank\").active = true;\n                    //             item.getChildByName(\"lblRank\").active = false;\n                    //             item.getChildByName(\"ic_rank\").getComponent(cc.Sprite).spriteFrame = this.sprRank[i];\n                    //         } else {\n                    //             item.getChildByName(\"ic_rank\").active = false;\n                    //             item.getChildByName(\"lblRank\").active = true;\n                    //         }\n                    //         item.active = true;\n                    //     } else {\n                    //         item.active = false;\n                    //     }\n                    // }\n                }\n            });\n        }\n    }\n\n}\n\nexport default taixiumini.PopupHonors;"]}
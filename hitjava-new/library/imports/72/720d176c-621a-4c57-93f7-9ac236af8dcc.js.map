{"version":3,"sources":["assets\\ShootFish\\ShootFishScript\\ShootFish.Player.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qEAAgE;AAG1D,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAoC,0BAAY;IAAhD;QAAA,qEA0FC;QAvFG,cAAQ,GAAW,CAAC,CAAC;QAErB,iBAAW,GAAa,IAAI,CAAC;QAE7B,aAAO,GAAa,IAAI,CAAC;QAEzB,YAAM,GAAa,IAAI,CAAC;QAExB,eAAS,GAAY,IAAI,CAAC;QAE1B,eAAS,GAAc,IAAI,CAAC;QAE5B,qBAAe,GAAqB,EAAE,CAAC;QAEvC,UAAI,GAAkB,EAAE,CAAC;QAElB,QAAE,GAAG,CAAC,CAAC;QACP,cAAQ,GAAG,EAAE,CAAC;QACd,cAAQ,GAAG,EAAE,CAAC;QACd,UAAI,GAAG,CAAC,CAAC;QACT,YAAM,GAAG,EAAE,CAAC;QACZ,eAAS,GAAG,CAAC,CAAC,CAAC;QAEd,SAAG,GAAgB,IAAI,CAAC;QACxB,eAAS,GAAG,CAAC,CAAC,CAAC;;IA+D3B,CAAC;IA7DG,oBAAG,GAAH,UAAI,EAAU,EAAE,QAAgB,EAAE,QAAgB,EAAE,IAAY,EAAE,MAAc;QAC5E,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAExB,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;QACxC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,eAAK,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAC/C,QAAQ,IAAI,CAAC,QAAQ,EAAE;YACnB,KAAK,CAAC,CAAC;YACP,KAAK,CAAC;gBACF,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,EAAE,CAAC;gBAC1B,MAAM;YACV,KAAK,CAAC,CAAC;YACP,KAAK,CAAC;gBACF,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC;gBAC3B,MAAM;SACb;QACD,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC;IAED,sBAAK,GAAL;QACI,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;QACb,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IAC7B,CAAC;IAED,uBAAM,GAAN,UAAO,MAAc;QACjB,IAAI,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,MAAM,GAAG,CAAC,CAAC;QAC3C,IAAI,IAAI,CAAC,SAAS,IAAI,MAAM;YAAE,OAAO;QAErC,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;QAExB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACvC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,MAAM,CAAC;SAC1C;QACD,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;QAC1D,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACjC,CAAC;IAED,0BAAS,GAAT,UAAU,QAAiB;QACvB,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,qBAAqB,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrE,IAAI,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAClC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,eAAK,CAAC,OAAO,CAAC;QACjD,IAAI,KAAK,GAAG,CAAC,EAAE,EAAE;YACb,KAAK,GAAG,GAAG,CAAC;SACf;aAAM,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,CAAC,EAAE,EAAE;YACjC,KAAK,GAAG,CAAC,CAAC;SACb;QACD,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;IACjC,CAAC;IAED,sBAAK,GAAL;QACI,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;IACxC,CAAC;IAtFD;QADC,QAAQ;4CACY;IAErB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACU;IAE7B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;2CACM;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;0CACK;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;6CACQ;IAE1B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;6CACQ;IAE5B;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;mDACY;IAEvC;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;wCACC;IAjBR,MAAM;QAD1B,OAAO;OACa,MAAM,CA0F1B;IAAD,aAAC;CA1FD,AA0FC,CA1FmC,EAAE,CAAC,SAAS,GA0F/C;kBA1FoB,MAAM","file":"","sourceRoot":"/","sourcesContent":["import Utils from \"../../Lobby/LobbyScript/Script/common/Utils\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Player extends cc.Component {\n\n    @property\n    localPos: number = 0;\n    @property(cc.Label)\n    lblNickname: cc.Label = null;\n    @property(cc.Label)\n    lblCoin: cc.Label = null;\n    @property(cc.Label)\n    lblBet: cc.Label = null;\n    @property(cc.Node)\n    gunRotate: cc.Node = null;\n    @property(cc.Sprite)\n    sprGunBar: cc.Sprite = null;\n    @property([cc.SpriteFrame])\n    sprFramesGunBar: cc.SpriteFrame[] = [];\n    @property([sp.Skeleton])\n    guns: sp.Skeleton[] = [];\n\n    public id = 0;\n    public username = \"\";\n    public nickname = \"\";\n    public coin = 0;\n    public avatar = \"\";\n    public serverPos = -1;\n\n    private gun: sp.Skeleton = null;\n    private curGunIdx = -1;\n\n    set(id: number, username: string, nickname: string, coin: number, avatar: string) {\n        this.id = id;\n        this.username = username;\n        this.nickname = nickname;\n        this.coin = coin;\n        this.avatar = avatar;\n        this.gunRotate.angle = 0;\n        this.node.active = true;\n\n        this.lblNickname.string = this.nickname;\n        this.lblCoin.string = Utils.formatNumber(coin);\n        switch (this.localPos) {\n            case 0:\n            case 1:\n                this.gunRotate.angle = 90;\n                break;\n            case 2:\n            case 3:\n                this.gunRotate.angle = -90;\n                break;\n        }\n        this.setGun(0);\n    }\n\n    leave() {\n        this.id = -1;\n        this.nickname = \"\";\n        this.coin = 0;\n        this.avatar = \"\";\n        this.node.active = false;\n    }\n\n    setGun(gunIdx: number) {\n        if (gunIdx >= this.guns.length) gunIdx = 0;\n        if (this.curGunIdx == gunIdx) return;\n\n        this.curGunIdx = gunIdx;\n\n        for (let i = 0; i < this.guns.length; i++) {\n            this.guns[i].node.active = i == gunIdx;\n        }\n        this.sprGunBar.spriteFrame = this.sprFramesGunBar[gunIdx];\n        this.gun = this.guns[gunIdx];\n    }\n\n    rotateGun(touchPos: cc.Vec2) {\n        var gunWorldPos = this.gunRotate.convertToWorldSpaceAR(cc.Vec2.ZERO);\n        var d = touchPos.sub(gunWorldPos);\n        var angle = Math.atan2(d.y, d.x) * Utils.Rad2Deg;\n        if (angle < -90) {\n            angle = 180;\n        } else if (angle < 0 && angle > -90) {\n            angle = 0;\n        }\n        this.gunRotate.angle = angle;\n    }\n\n    shoot() {\n        this.gun.setAnimation(0, \"2\", false);\n        this.gun.addAnimation(0, \"1\", true);\n    }\n}\n"]}
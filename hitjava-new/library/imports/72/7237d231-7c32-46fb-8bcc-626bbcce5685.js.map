{"version":3,"sources":["assets\\TaiXiuDouble\\TaiXiuScript\\TaiXiu2\\TaiXiuMini2.PopupThanhDu.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Configs from \"../../../Loading/src/Configs\";\nimport Http from \"../../../Loading/src/Http\";\nimport App from \"../../../Lobby/LobbyScript/Script/common/App\";\nimport Dialog from \"../../../Lobby/LobbyScript/Script/common/Dialog\";\nimport Utils from \"../../../Lobby/LobbyScript/Script/common/Utils\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PopupThanhDu extends Dialog {\n\n    @property(cc.SpriteFrame)\n    sprTabNormal: cc.SpriteFrame = null;\n    @property(cc.SpriteFrame)\n    sprTabActive: cc.SpriteFrame = null;\n    @property(cc.Node)\n    tabs: cc.Node = null;\n    @property(cc.Node)\n    childTabs: cc.Node = null;\n    @property(cc.Node)\n    itemTemplate: cc.Node = null;\n    @property(cc.Label)\n    lblDate: cc.Label = null;\n\n    private selectedTab = 0;\n    private selectedChildTab = 0;\n    private date = new Date();\n\n    private items = new Array<cc.Node>();\n\n    start() {\n        for (let i = 0; i < this.tabs.childrenCount; i++) {\n            let tab = this.tabs.children[i];\n            tab.on(\"click\", () => {\n                this.selectedTab = i;\n                this.selectedChildTab = 0;\n                this.date = new Date();\n                this.updateTabSpriteFrame();\n                this.loadData();\n            });\n        }\n\n        for (let i = 0; i < this.childTabs.childrenCount; i++) {\n            let tab = this.childTabs.children[i];\n            tab.on(\"click\", () => {\n                this.selectedChildTab = i;\n                this.updateTabSpriteFrame();\n                this.loadData();\n            });\n        }\n    }\n\n    dismiss() {\n        super.dismiss();\n        for (let i = 0; i < this.items.length; i++) {\n            this.items[i].active = false;\n        }\n    }\n\n    show() {\n        super.show();\n\n        for (let i = 0; i < this.items.length; i++) {\n            this.items[i].active = false;\n        }\n        if (this.itemTemplate != null) this.itemTemplate.active = false;\n    }\n\n    _onShowed() {\n        super._onShowed();\n        this.selectedTab = 0;\n        this.selectedChildTab = 0;\n        this.updateTabSpriteFrame();\n        this.loadData();\n    }\n\n    actNext() {\n        if (this.selectedTab === 0) {\n            this.date.setDate(this.date.getDate() + 1);\n        } else {\n            this.date.setMonth(this.date.getMonth() + 1);\n        }\n        this.loadData();\n    }\n\n    actPrev() {\n        if (this.selectedTab === 0) {\n            this.date.setDate(this.date.getDate() - 1);\n        } else {\n            this.date.setMonth(this.date.getMonth() - 1);\n        }\n        this.loadData();\n    }\n\n    private updateTabSpriteFrame() {\n        for (let i = 0; i < this.tabs.childrenCount; i++) {\n            let tab = this.tabs.children[i];\n            tab.getComponent(cc.Sprite).spriteFrame = this.selectedTab == i ? this.sprTabActive : this.sprTabNormal;\n        }\n        for (let i = 0; i < this.childTabs.childrenCount; i++) {\n            let tab = this.childTabs.children[i];\n            tab.getComponent(cc.Sprite).spriteFrame = this.selectedChildTab == i ? this.sprTabActive : this.sprTabNormal;\n        }\n    }\n\n    private loadData() {\n        App.instance.showLoading(true);\n\n        var typeTop = this.selectedChildTab === 0 ? 1 : 0;\n        var date = this.selectedTab === 0 ? Utils.dateToYYYYMMdd(this.date) : Utils.dateToYYYYMM(this.date);\n        this.lblDate.string = date;\n        var params = this.selectedTab === 0 ? { \"c\": 103, \"date\": date, \"type\": typeTop, \"txType\": 2 } : { \"c\": 103, \"month\": date, \"type\": typeTop, \"txType\": 2 };\n        Http.get(Configs.App.API, params, (err, res) => {\n            App.instance.showLoading(false);\n            if (err != null) return;\n            if (!res[\"success\"]) return;\n\n            if (this.items.length == 0) {\n                for (var i = 0; i < 10; i++) {\n                    let item = cc.instantiate(this.itemTemplate);\n                    item.parent = this.itemTemplate.parent;\n                    this.items.push(item);\n                }\n                this.itemTemplate.destroy();\n                this.itemTemplate = null;\n            }\n\n            for (let i = 0; i < this.items.length; i++) {\n                let item = this.items[i];\n                if (i < res[\"results\"].length) {\n                    let itemData = res[\"results\"][i];\n                    item.getChildByName(\"bg\").opacity = i % 2 == 0 ? 10 : 0;\n                    item.getChildByName(\"no\").getComponent(cc.Label).string = (i + 1).toString();\n                    item.getChildByName(\"account\").getComponent(cc.Label).string = itemData[\"username\"];\n                    item.getChildByName(\"count\").getComponent(cc.Label).string = Utils.formatNumber(itemData[\"number\"]);\n                    item.getChildByName(\"winlose\").getComponent(cc.Label).string = Utils.formatNumber(itemData[\"totalMoney\"]);\n                    item.getChildByName(\"session\").getComponent(cc.Label).string = \"#\" + itemData[\"referenceId\"];\n                    item.getChildByName(\"award\").getComponent(cc.Label).string = itemData[\"prize\"];\n                    item.active = true;\n                } else {\n                    item.active = false;\n                }\n            }\n        });\n    }\n}"]}
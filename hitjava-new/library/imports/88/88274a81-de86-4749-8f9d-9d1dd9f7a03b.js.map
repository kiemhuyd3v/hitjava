{"version":3,"sources":["assets\\Lobby\\LobbyScript\\PopupEventTT.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Configs from \"../../Loading/src/Configs\";\nimport { Global } from \"../../Loading/src/Global\";\nimport Http from \"../../Loading/src/Http\";\nimport App from \"./Script/common/App\";\nimport BroadcastReceiver from \"./Script/common/BroadcastReceiver\";\nimport Dialog from \"./Script/common/Dialog\";\nimport Utils from \"./Script/common/Utils\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PopupEventTT extends Dialog {\n\n    // LIFE-CYCLE CALLBACKS:\n    @property([cc.Button])\n    listBtn: cc.Button[] = [];\n    // onLoad () {}\n    dataEvent: any = null;\n    listPackage = [];\n    start() {\n        this.node.zIndex = cc.macro.MAX_ZINDEX;\n    }\n    showpPopup(data) {\n        super.show();\n        this.listPackage = [];\n        this.dataEvent = data;\n        for (let i = 0; i < this.dataEvent['lstMoonEvents'].length; i++) {\n            this.listPackage.push(this.dataEvent['lstMoonEvents'][i]);\n            if (this.listBtn[i]) {\n                this.listBtn[i].clickEvents[0].customEventData = this.dataEvent['lstMoonEvents'][i]['idEvent'];\n            }\n        }\n    }\n    onClick(even, data) {\n        data = JSON.parse(data)\n        let nameCake = \"\";\n        if (data == 11) {\n            nameCake = \"Bạch Kim\";\n        } else if (data == 12) {\n            nameCake = \"Hoàng Kim\";\n        }\n        else if (data == 13) {\n            nameCake = \"Kim Cương\";\n        }\n        this.node.zIndex = 0;\n        App.instance.confirmDialog.show2(\"Bạn chắc chắn muốn mua\\ngói quà \" + nameCake + \" chứ?\", (isConfirm) => {\n            if (isConfirm) {\n                App.instance.showLoading(true);\n                Http.get(Configs.App.API, { \"c\": 21, \"nn\": Configs.Login.Nickname, \"at\": Configs.Login.AccessToken, \"id\": data }, (err, res) => {\n                   //  //Utils.Log(\"On Buy Moon:\", res);\n                    App.instance.showLoading(false);\n                    if (err) {\n                        App.instance.ShowAlertDialog(App.instance.getTextLang(\"txt_unknown_error1\"));\n                        return;\n                    } else {\n                        // //Utils.Log(\"succes ko dkm:\", res.success);\n\n                        if (res.success) {\n                            switch (res.errorCode) {\n                                case \"0\":\n                                    App.instance.ShowAlertDialog(\"Chúc mừng bạn đã mua thành công gói quà:\" + nameCake);\n                                    Configs.Login.Coin = res.money;\n                                    BroadcastReceiver.send(BroadcastReceiver.USER_UPDATE_COIN);\n                                    this.dismiss();\n                                    break;\n                                case \"1\":\n                                    App.instance.ShowAlertDialog(\"Bạn đã mua gói quà này,\\nVui lòng chọn gói quà khác nhé!\");\n                                    break;\n                                case \"2\":\n                                    App.instance.ShowAlertDialog(\"Bạn không đủ tiền để mua gói quà này!\\nVui lòng liên hệ CSKH để được hướng dẫn.\");\n                                    break;\n                                default:\n                                    App.instance.ShowAlertDialog(App.instance.getTextLang(\"txt_unknown_error1\" + res.errorCode));\n                                    break;\n                            }\n                        } else {\n                            App.instance.ShowAlertDialog(App.instance.getTextLang(\"txt_unknown_error1\"));\n                        }\n                    }\n                });\n            }\n\n        })\n\n    }\n\n    // update (dt) {}\n}\n"]}
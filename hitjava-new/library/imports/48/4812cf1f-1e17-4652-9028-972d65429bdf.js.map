{"version":3,"sources":["assets\\Slot4\\Slot4Script\\Slot4.PopupBonus.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport Dialog from \"../../Lobby/LobbyScript/Script/common/Dialog\";\nimport Tween from \"../../Lobby/LobbyScript/Script/common/Tween\";\nimport Slot4Controller from \"./Slot4Controller\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class PopupBonus extends Dialog {\n    @property(cc.Node)\n    items: cc.Node = null;\n    @property(cc.Node)\n    nodeBoxNotify: cc.Node = null;\n    @property(cc.Label)\n    txtNotify: cc.Label = null;\n    @property(cc.Label)\n    lblLeft: cc.Label = null;\n    @property(cc.Label)\n    lblFactor: cc.Label = null;\n    @property(cc.Label)\n    lblHeso: cc.Label = null;\n    @property(cc.Label)\n    lblWin: cc.Label = null;\n    private factor = 1;\n    private left = 0;\n    private betValue = 0;\n    private onFinished: () => void = null;\n    private onSpecialFinished: () => void = null;\n    private dataBonus: Array<number> = [];\n    private dataSpecial: number = -1;\n    private heso:number = 0;\n    private win : number = 0;\n    private controller:Slot4Controller = null;\n    start() {\n        \n        var sefl = this;\n        for (let i = 0; i < this.items.childrenCount; i++) {\n            let node = this.items.children[i];\n            node[\"btn\"] = node.getChildByName(\"btn\").getComponent(cc.Button);\n            node[\"label\"] = node.getChildByName(\"label\").getComponent(cc.Label);\n\n            node[\"btn\"].node.on(\"click\", () => {\n                this.controller.onBtnSoundTouchBonus();\n                var value = sefl.dataBonus[sefl.dataBonus.length - this.left];\n                //  cc.log(\"click:\"+value+\" : \"+node[\"is_open\"]);\n                if(node[\"is_open\"] == false && sefl.left > 0){\n                    node[\"is_open\"] = true;\n                    switch (value) {\n                        case 0:\n                            sefl.factor++;\n                            sefl.lblFactor.string = this.factor+\"\";\n                            node[\"btn_spine\"].setAnimation(0,\"idle_0\",true);\n                            node[\"btn_spine\"].addAnimation(1,\"open_0\",false); \n                            \n                            break;\n                        case 1:\n                            node[\"btn_spine\"].setAnimation(0,\"idle_1\",true);\n                            node[\"btn_spine\"].addAnimation(1,\"open_1\",false); \n                            node[\"label\"].node.active = true;\n                            node[\"label\"].string = \"0\";\n                            Tween.numberTo(node[\"label\"], 4*this.betValue , 0.3);\n                            this.win += 4* this.betValue;\n                            Tween.numberTo(this.lblWin,this.win, 0.3);\n                            break;\n                       \n                        case 2:\n                            node[\"btn_spine\"].setAnimation(0,\"idle_2\",true);\n                            node[\"btn_spine\"].addAnimation(1,\"open_2\",false); \n                            node[\"label\"].node.active = true;\n                            node[\"label\"].string = \"0\";\n                            Tween.numberTo(node[\"label\"],10* this.betValue * this.factor, 0.3);\n                            this.win += 10* this.betValue * this.factor;\n                            Tween.numberTo(this.lblWin,this.win, 0.3);\n                            break;\n                        case 3:\n                            node[\"btn_spine\"].setAnimation(0,\"idle_3\",true);\n                            node[\"btn_spine\"].addAnimation(1,\"open_3\",false); \n                            node[\"label\"].node.active = true;\n                            node[\"label\"].string = \"0\";\n                            Tween.numberTo(node[\"label\"],15* this.betValue * this.factor, 0.3);\n                            this.win += 15* this.betValue * this.factor;\n                            Tween.numberTo(this.lblWin,this.win, 0.3);\n                            break;\n                        case 4:\n                            node[\"btn_spine\"].setAnimation(0,\"idle_4\",true);\n                            node[\"btn_spine\"].addAnimation(1,\"open_4\",false); \n                            node[\"label\"].node.active = true;\n                            node[\"label\"].string = \"0\";\n                            this.win += 20* this.betValue * this.factor;\n                            Tween.numberTo(node[\"label\"],20* this.betValue * this.factor, 0.3);\n                            Tween.numberTo(this.lblWin,this.win, 0.3);\n                            break;\n                        \n\n                    }\n                    this.left--;\n                    this.lblLeft.string = \"\" + this.left;\n                    if (this.left <= 0) {\n                        this.hidden();\n                    }\n                }\n            });\n        }\n\n       \n    }\n\n    showBonus(betValue: number, bonus: string,controller, onFinished: () => void) {\n        super.show();\n        this.controller = controller;\n        this.win = 0;\n        for (let i = 0; i < this.items.childrenCount; i++) {\n            let node = this.items.children[i];\n            node[\"btn\"] = node.getChildByName(\"btn\").getComponent(cc.Button);\n            node[\"btn_spine\"] = node[\"btn\"].getComponentInChildren(sp.Skeleton);\n            node[\"btn_spine\"].setAnimation(0,\"idle\",true);\n            node[\"btn_spine\"].addAnimation(1,\"appear\",false); \n            node[\"is_open\"] = false;\n        }\n        for (let i = 0; i < this.items.childrenCount; i++) {\n            let node = this.items.children[i];\n            let btn = node.getChildByName(\"btn\").getComponent(cc.Button);\n            btn.node.active = true;\n            btn.interactable = true;\n            node.getChildByName(\"label\").active = false;\n        }\n        this.betValue = betValue;\n        this.onFinished = onFinished;\n        let arrBonus = bonus.split(\",\");\n        this.dataBonus = [];\n        for (let i = 0; i < arrBonus.length; i++) {\n            this.dataBonus.push(Number(arrBonus[i]));\n            if (i === 10)\n                break;\n        }\n        this.left = this.dataBonus.length - 1;\n        this.factor = 1;\n        this.lblLeft.string = \"\" + this.left;\n        this.lblFactor.string =  this.factor+\"\";\n        this.heso = this.dataBonus[0];\n        this.lblHeso.string = \"x\"+this.heso;\n    }\n\n    \n    hidden() {\n        this.controller.onBtnSoundSumary();\n        Tween.showPopup(this.nodeBoxNotify,this.nodeBoxNotify.parent);\n        Tween.numberTo(this.txtNotify,this.win, 0.3);\n        \n    }\n\n    onBtnExit(){\n        Tween.hidePopup(this.nodeBoxNotify,this.nodeBoxNotify.parent,false);\n        this.scheduleOnce(() => {\n            this.dismiss();\n            this.onFinished();\n        }, 1.5);\n    }\n}\nexport default PopupBonus;"]}
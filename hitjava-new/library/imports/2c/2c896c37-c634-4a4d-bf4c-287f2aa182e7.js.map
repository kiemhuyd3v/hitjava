{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Lobby.CardRoom.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Configs from \"../../Loading/src/Configs\";\nimport App from \"./Script/common/App\";\nimport Tween from \"./Script/common/Tween\";\nimport Utils from \"./Script/common/Utils\";\nimport CardGameCmd from \"./Script/networks/CardGame.Cmd\";\nimport CardGameNetworkClient from \"./Script/networks/CardGameNetworkClient\";\nimport InPacket from \"./Script/networks/Network.InPacket\";\nimport TienLenCmd from \"./TienLenScript/TienLen.Cmd\";\nimport TienLenGameLogic from \"./TienLenScript/TienLen.GameLogic\";\n\n\nconst { ccclass, property } = cc._decorator;\n\nnamespace Lobby {\n    @ccclass\n    export class CardRoom extends cc.Component {\n\n        @property(cc.Node)\n        roomContent: cc.Node = null;\n        @property(cc.Prefab)\n        roomItem: cc.Node = null;\n\n        networkClient: CardGameNetworkClient = null;\n\n        start() {\n            this.networkClient.addListener(this.handleRoomRespone, this);\n        }\n\n        handleRoomRespone = (data) => {\n            let inpacket = new InPacket(data);\n             ////Utils.Log(inpacket.getCmdId());\n            switch (inpacket.getCmdId()) {\n                case CardGameCmd.Code.JOIN_ROOM_FAIL: {\n                    let res = new CardGameCmd.ReceivedJoinRoomFail(data);\n                    var e = \"\";\n                    switch (res.error) {\n                        case 1:\n                            e = \"L\\u1ed7i ki\\u1ec3m tra th\\u00f4ng tin!\";\n                            break;\n                        case 2:\n                            e = \"Kh\\u00f4ng t\\u00ecm \\u0111\\u01b0\\u1ee3c ph\\u00f2ng th\\u00edch h\\u1ee3p. Vui l\\u00f2ng th\\u1eed l\\u1ea1i sau!\";\n                            break;\n                        case 3:\n                            e = \"B\\u1ea1n kh\\u00f4ng \\u0111\\u1ee7 ti\\u1ec1n v\\u00e0o ph\\u00f2ng ch\\u01a1i n\\u00e0y!\";\n                            break;\n                        case 4:\n                            e = \"Kh\\u00f4ng t\\u00ecm \\u0111\\u01b0\\u1ee3c ph\\u00f2ng th\\u00edch h\\u1ee3p. Vui l\\u00f2ng th\\u1eed l\\u1ea1i sau!\";\n                            break;\n                        case 5:\n                            e = \"M\\u1ed7i l\\u1ea7n v\\u00e0o ph\\u00f2ng ph\\u1ea3i c\\u00e1ch nhau 10 gi\\u00e2y!\";\n                            break;\n                        case 6:\n                            e = \"H\\u1ec7 th\\u1ed1ng b\\u1ea3o tr\\u00ec!\";\n                            break;\n                        case 7:\n                            e = \"Kh\\u00f4ng t\\u00ecm th\\u1ea5y ph\\u00f2ng ch\\u01a1i!\";\n                            break;\n                        case 8:\n                            e = \"M\\u1eadt kh\\u1ea9u ph\\u00f2ng ch\\u01a1i kh\\u00f4ng \\u0111\\u00fang!\";\n                            break;\n                        case 9:\n                            e = \"Ph\\u00f2ng ch\\u01a1i \\u0111\\u00e3 \\u0111\\u1ee7 ng\\u01b0\\u1eddi!\";\n                            break;\n                        case 10:\n                            e = \"B\\u1ea1n b\\u1ecb ch\\u1ee7 ph\\u00f2ng kh\\u00f4ng cho v\\u00e0o b\\u00e0n!\"\n                    }\n                    App.instance.alertDialog.showMsg(e);\n                    break;\n                }\n                case TienLenCmd.Code.JOIN_ROOM_SUCCESS: {\n                    let res = new TienLenCmd.ReceivedJoinRoomSuccess(data);\n                     ////Utils.Log(res);\n                    TienLenGameLogic.getInstance().initWith(res);\n                    App.instance.openGame(\"TienLen\", \"TienLen\");\n                    break;\n                }\n                case TienLenCmd.Code.AUTO_START: {\n                    let res = new TienLenCmd.ReceivedAutoStart(data);\n                     ////Utils.Log(res);\n                    TienLenGameLogic.getInstance().autoStart(res);\n                    break;\n                }\n            }\n        };\n\n        initRooms(rooms, client) {\n            this.networkClient = client;\n\n            this.roomContent.removeAllChildren();\n            rooms.forEach(room => {\n                var item = cc.instantiate(this.roomItem);\n                var txts = item.getComponentsInChildren(cc.Label);\n                Tween.numberTo(txts[2], room.moneyRequire, 0.3);\n                Tween.numberTo(txts[3], room.moneyBet, 0.3);\n                txts[4].string = room.nPersion + \"/\" + room.maxUserPerRoom;\n                var progress = item.getComponentInChildren(cc.ProgressBar);\n                progress.progress = room.nPersion / room.maxUserPerRoom;\n                var btnJoin = item.getComponentInChildren(cc.Button);\n                btnJoin.node.on(cc.Node.EventType.TOUCH_END, (event) => {\n                    this.networkClient.send(new CardGameCmd.SendJoinRoom(Configs.App.MONEY_TYPE, room.maxUserPerRoom, room.moneyBet, 0, room.roomIndex));\n                });\n                item.parent = this.roomContent;\n            });\n        }\n    }\n}\nexport default Lobby.CardRoom;\n"]}
{"version":3,"sources":["assets\\TaiXiuMD5\\TaiXiuScript\\TaiXiu1\\TaiXiuMD5.PopupHistory.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Configs from \"../../../Loading/src/Configs\";\nimport Http from \"../../../Loading/src/Http\";\nimport App from \"../../../Lobby/LobbyScript/Script/common/App\";\nimport Dialog from \"../../../Lobby/LobbyScript/Script/common/Dialog\";\nimport Utils from \"../../../Lobby/LobbyScript/Script/common/Utils\";\nimport Tween from \"../../../Lobby/LobbyScript/Script/common/Tween\";\n\nconst { ccclass, property } = cc._decorator;\n\nnamespace taixiumini {\n    @ccclass\n    export class PopupHistory extends Dialog {\n\n        @property(cc.Label)\n        lblPage: cc.Label = null;\n        @property(cc.Node)\n        itemTemplate: cc.Node = null;\n\n        private page: number = 1;\n        private maxPage: number = 1;\n        private items = new Array<cc.Node>();\n\n        show() {\n            super.show();\n\n            for (let i = 0; i < this.items.length; i++) {\n                this.items[i].active = false;\n            }\n            if (this.itemTemplate != null) this.itemTemplate.active = false;\n        }\n\n        dismiss() {\n            super.dismiss();\n            for (let i = 0; i < this.items.length; i++) {\n                this.items[i].active = false;\n            }\n        }\n\n        _onShowed() {\n            super._onShowed();\n\n            this.page = 1;\n            this.maxPage = 1;\n            this.lblPage.string = this.page + \"/\" + this.maxPage;\n            this.loadData();\n        }\n\n        actNextPage() {\n            if (this.page < this.maxPage) {\n                this.page++;\n                this.lblPage.string = this.page + \"/\" + this.maxPage;\n                this.loadData();\n            }\n        }\n\n        actPrevPage() {\n            if (this.page > 1) {\n                this.page--;\n                this.lblPage.string = this.page + \"/\" + this.maxPage;\n                this.loadData();\n            }\n        }\n\n        private loadData() {\n            App.instance.showLoading(true);\n            Http.get(Configs.App.API, { \"c\": 100, \"p\": this.page, \"un\": Configs.Login.Nickname, \"mt\": Configs.App.MONEY_TYPE, \"txType\": 1 }, (err, res) => {\n                App.instance.showLoading(false);\n                if (err != null) return;\n                if (!res[\"success\"]) return;\n\n                if (this.items.length == 0) {\n                    for (var i = 0; i < 10; i++) {\n                        let item = cc.instantiate(this.itemTemplate);\n                        item.parent = this.itemTemplate.parent;\n                        this.items.push(item);\n                    }\n                    this.itemTemplate.destroy();\n                    this.itemTemplate = null;\n                }\n\n                this.maxPage = res[\"totalPages\"];\n                this.lblPage.string = this.page + \"/\" + this.maxPage;\n                for (let i = 0; i < this.items.length; i++) {\n                    let item = this.items[i];\n                    if (i < res[\"transactions\"].length) {\n                        let itemData = res[\"transactions\"][i];\n                        item.getChildByName(\"bg\").opacity = i % 2 == 0 ? 10 : 0;\n                        item.getChildByName(\"lblSession\").getComponent(cc.Label).string = \"#\" + itemData[\"referenceId\"];\n                        item.getChildByName(\"lblTime\").getComponent(cc.Label).string = itemData[\"timestamp\"];\n                        item.getChildByName(\"lblBetDoor\").getComponent(cc.Label).string = itemData[\"betSide\"] == 1 ? \"TÀI\" : \"XỈU\";\n                        item.getChildByName(\"lblResult\").getComponent(cc.Label).string = itemData[\"resultPhien\"];\n                        item.getChildByName(\"lblBet\").getComponent(cc.Label).string = Utils.formatNumber(itemData[\"betValue\"]);\n                        item.getChildByName(\"lblRefund\").getComponent(cc.Label).string = Utils.formatNumber(itemData[\"totalRefund\"]);\n                        item.getChildByName(\"lblWin\").getComponent(cc.Label).string = Utils.formatNumber(itemData[\"totalPrize\"]);\n                        item.active = true;\n                    } else {\n                        item.active = false;\n                    }\n                }\n            });\n        }\n    }\n}\nexport default taixiumini.PopupHistory;"]}
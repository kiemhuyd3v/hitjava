{"version":3,"sources":["assets\\Slot7\\Slot7Script\\Slot7.PopupBonus.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Dialog from \"../../Lobby/LobbyScript/Script/common/Dialog\";\nimport Tween from \"../../Lobby/LobbyScript/Script/common/Tween\";\nimport Slot7Controller from \"./Slot7.Slot7Controller\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class PopupBonus extends Dialog {\n  @property(cc.Node)\n  items: cc.Node = null;\n  @property(cc.Node)\n  nodeBoxNotify: cc.Node = null;\n  @property(cc.Label)\n  txtNotify: cc.Label = null;\n  @property(cc.Label)\n  lblLeft: cc.Label = null;\n  @property(cc.Label)\n  lblFactor: cc.Label = null;\n  @property(cc.Label)\n  lblHeso: cc.Label = null;\n  @property(cc.Label)\n  lblWin: cc.Label = null;\n  private factor = 1;\n  private left = 0;\n  private betValue = 0;\n  private onFinished: () => void = null;\n  private onSpecialFinished: () => void = null;\n  private dataBonus: Array<number> = [];\n  private dataSpecial: number = -1;\n  private heso: number = 0;\n  private win: number = 0;\n  private controller: Slot7Controller = null;\n  start() {\n    for (let i = 0; i < this.items.childrenCount; i++) {\n      let node = this.items.children[i];\n      node[\"btn\"] = node.getChildByName(\"btn\").getComponent(cc.Button);\n      node[\"label\"] = node.getChildByName(\"label\").getComponent(cc.Label);\n      node[\"ske\"] = node.getChildByName(\"ske\").getComponent(sp.Skeleton);\n      node[\"ske\"].animation = \"mo\";\n      node[\"ske\"].loop = true;\n      node[\"btn\"].node.active = true;\n      node[\"btn\"].node.on(\"click\", () => {\n        this.controller.onBtnSoundTouchBonus();\n        var value = this.dataBonus[this.dataBonus.length - this.left];\n        cc.log(\"click:\" + value + \" : \" + node[\"is_open\"]);\n        if (node[\"is_open\"] == false && this.left > 0) {\n          node[\"is_open\"] = true;\n          switch (value) {\n            case 0:\n              this.factor++;\n              this.lblFactor.string = this.factor + \"\";\n              node[\"ske\"].animation = \"miss\";\n              node[\"ske\"].loop = true;\n              node[\"btn\"].node.active = false;\n              break;\n            case 1:\n              node[\"ske\"].animation = \"mo2\";\n              node[\"ske\"].loop = true;\n              node[\"btn\"].node.active = false;\n              node[\"label\"].node.active = true;\n              node[\"label\"].string = \"0\";\n              Tween.numberTo(node[\"label\"], 4 * this.betValue, 0.3);\n              this.win += 4 * this.betValue;\n              Tween.numberTo(this.lblWin, this.win, 0.3);\n              break;\n\n            case 2:\n              node[\"ske\"].animation = \"mo2\";\n              node[\"ske\"].loop = true;\n\n              node[\"label\"].node.active = true;\n              node[\"label\"].string = \"0\";\n              Tween.numberTo(\n                node[\"label\"],\n                10 * this.betValue * this.factor,\n                0.3\n              );\n              this.win += 10 * this.betValue * this.factor;\n              Tween.numberTo(this.lblWin, this.win, 0.3);\n              break;\n            case 3:\n              node[\"ske\"].animation = \"mo2\";\n              node[\"ske\"].loop = true;\n\n              node[\"label\"].node.active = true;\n              node[\"label\"].string = \"0\";\n              Tween.numberTo(\n                node[\"label\"],\n                15 * this.betValue * this.factor,\n                0.3\n              );\n              this.win += 15 * this.betValue * this.factor;\n              Tween.numberTo(this.lblWin, this.win, 0.3);\n              break;\n            case 4:\n              node[\"ske\"].animation = \"mo2\";\n              node[\"ske\"].loop = true;\n              node[\"label\"].node.active = true;\n              node[\"label\"].string = \"0\";\n              this.win += 20 * this.betValue * this.factor;\n              Tween.numberTo(\n                node[\"label\"],\n                20 * this.betValue * this.factor,\n                0.3\n              );\n              Tween.numberTo(this.lblWin, this.win, 0.3);\n              break;\n          }\n          this.left--;\n          this.lblLeft.string = \"\" + this.left;\n          if (this.left <= 0) {\n            this.hidden();\n          }\n        }\n      });\n    }\n  }\n\n  showBonus(\n    betValue: number,\n    bonus: string,\n    controller,\n    onFinished: () => void\n  ) {\n    super.show();\n    this.controller = controller;\n    this.win = 0;\n    Tween.numberTo(this.lblWin, this.win, 0.3);\n    for (let i = 0; i < this.items.childrenCount; i++) {\n      let node = this.items.children[i];\n      node[\"btn\"] = node.getChildByName(\"btn\").getComponent(cc.Button);\n      node[\"label\"] = node.getChildByName(\"label\").getComponent(cc.Label);\n      node[\"ske\"] = node.getChildByName(\"ske\").getComponent(sp.Skeleton);\n      node[\"ske\"].animation = \"mo\";\n      node[\"ske\"].loop = true;\n      node[\"btn\"].node.active = true;\n      node[\"label\"].node.active = false;\n      node[\"is_open\"] = false;\n    }\n    for (let i = 0; i < this.items.childrenCount; i++) {\n      let node = this.items.children[i];\n      let btn = node.getChildByName(\"btn\").getComponent(cc.Button);\n      btn.node.active = true;\n      btn.interactable = true;\n      node.getChildByName(\"label\").active = false;\n    }\n    this.betValue = betValue;\n    this.onFinished = onFinished;\n    let arrBonus = bonus.split(\",\");\n    this.dataBonus = [];\n    for (let i = 0; i < arrBonus.length; i++) {\n      this.dataBonus.push(Number(arrBonus[i]));\n    }\n    this.left = this.dataBonus.length - 1;\n    this.factor = 1;\n    this.lblLeft.string = \"\" + this.left;\n    this.lblFactor.string = this.factor + \"\";\n    this.heso = this.dataBonus[0];\n    this.lblHeso.string = \"x\" + this.heso;\n  }\n\n  hidden() {\n    this.scheduleOnce(() => {\n      this.dismiss();\n      this.onFinished();\n    }, 1.5);\n    // this.controller.onBtnSoundSumary();\n    // Tween.showPopup(this.nodeBoxNotify,this.nodeBoxNotify.parent);\n    // Tween.numberTo(this.txtNotify,this.win, 0.3);\n  }\n\n  onBtnExit() {\n    Tween.hidePopup(this.nodeBoxNotify, this.nodeBoxNotify.parent, false);\n    this.scheduleOnce(() => {\n      this.dismiss();\n      this.onFinished();\n    }, 1.5);\n  }\n}\nexport default PopupBonus;\n"]}
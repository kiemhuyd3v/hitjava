{"version":3,"sources":["assets\\Lobby\\LobbyScript\\PopupLogin.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport { cmd } from \"./Lobby.Cmd\";\nimport BundleControl from \"../../Loading/src/BundleControl\";\nimport Configs from \"../../Loading/src/Configs\";\nimport { Global } from \"../../Loading/src/Global\";\nimport Http from \"../../Loading/src/Http\";\nimport App from \"./Script/common/App\";\nimport BroadcastReceiver from \"./Script/common/BroadcastReceiver\";\nimport Dialog from \"./Script/common/Dialog\";\nimport SPUtils from \"./Script/common/SPUtils\";\nimport SlotNetworkClient from \"./Script/networks/SlotNetworkClient\";\nimport Utils from \"./Script/common/Utils\";\n\nconst { ccclass, property } = cc._decorator;\n\nnamespace Lobby {\n\n    @ccclass\n    export class PopupRegister extends Dialog {\n\n        @property(cc.EditBox)\n        edbUsername: cc.EditBox = null;\n        @property(cc.EditBox)\n        edbPassword: cc.EditBox = null;\n\n\n\n        @property(cc.Node)\n        nodeRemember: cc.Node = null;\n        @property(cc.Toggle)\n        toggleRemember: cc.Toggle = null;\n\n        start() {\n        }\n        show(even = null, data = null) {\n\n            super.show();\n            this.edbUsername.tabIndex = 0;\n            this.edbPassword.tabIndex = 0;\n            this.toggleRemember.isChecked = cc.sys.localStorage.getItem(\"IsRemember\") == 1 ? true : false;\n            if (this.toggleRemember.isChecked) {\n                this.edbUsername.string = SPUtils.getUserName();\n                this.edbPassword.string = SPUtils.getUserPass();\n            }\n        }\n\n\n\n        atcPopupUpdateNickName(username, password) {\n            let cb = (prefab) => {\n                let popupDaily = cc.instantiate(prefab).getComponent(\"PopupUpdateNickname\");\n                App.instance.canvas.addChild(popupDaily.node)\n                App.instance.popupUpdateNickname = popupDaily;\n                App.instance.popupUpdateNickname.show2(username, password);\n            }\n            BundleControl.loadPrefabPopup(\"PrefabPopup/PopupUpdateNickname\", cb);\n        }\n\n\n\n        public actLogin() {\n            let username = this.edbUsername.string.trim();\n            let password = this.edbPassword.string;\n             //Utils.Log(\"actLogin:\" + username + \":\" + password);\n            cc.sys.localStorage.setItem(\"IsRemember\", this.toggleRemember.isChecked ? 1 : 0);\n            cc.sys.localStorage.setItem(\"IsAutoLogin\", this.toggleRemember.isChecked ? 1 : 0);\n            Global.LobbyController.actLogin(username, password, () => {\n                App.instance.TYPE_LOGIN = \"NORMAL\";\n                App.instance.USER_NAME = username;\n                App.instance.PASS_WORD = password;\n                SPUtils.setUserName(username);\n                SPUtils.setUserPass(password);\n                this.dismiss();\n            });\n\n        }\n        actLoginToken(data): void {\n            Configs.Login.AccessToken = data.at;\n            Configs.Login.AccessToken2 = data.at;\n            App.instance.showLoading(true);\n            Http.get(Configs.App.API, { c: 17, u: data.u, at: data.at }, (err, res) => {\n                App.instance.showLoading(false);\n                 //Utils.Log(res);\n                switch (parseInt(res[\"errorCode\"])) {\n                    case 0:\n                        //  //Utils.Log(\"Đăng nhập thành công.\");\n\n                        Configs.Login.AccessToken = res[\"accessToken\"];\n                        if (cc.sys.isBrowser) {\n                            window.localStorage.setItem(\"at\", Configs.Login.AccessToken);\n                        }\n                        Configs.Login.SessionKey = res[\"sessionKey\"];\n                        Configs.Login.IsLogin = true;\n                        var userInfo = JSON.parse(base64.decode(Configs.Login.SessionKey));\n                        Configs.Login.Nickname = userInfo[\"nickname\"];\n                        Configs.Login.Avatar = userInfo[\"avatar\"];\n                        Configs.Login.Coin = userInfo[\"vinTotal\"];\n                        Configs.Login.LuckyWheel = userInfo[\"luckyRotate\"];\n                        Configs.Login.IpAddress = userInfo[\"ipAddress\"];\n                        Configs.Login.CreateTime = userInfo[\"createTime\"];\n                        Configs.Login.Birthday = userInfo[\"birthday\"];\n                        Configs.Login.VipPoint = userInfo[\"vippoint\"];\n                        Configs.Login.VipPointSave = userInfo[\"vippointSave\"];\n\n                        // khoi tao 3 socket dong thoi gui goi tin len server\n                        // MiniGameNetworkClient.getInstance().sendCheck(new cmd.ReqSubcribeJackpots());\n                        SlotNetworkClient.getInstance().sendCheck(new cmd.ReqSubcribeHallSlot());\n\n                        App.instance.buttonMiniGame.show();\n                        BroadcastReceiver.send(BroadcastReceiver.USER_INFO_UPDATED);\n\n                        /* switch (VersionConfig.CPName) {\n                            default:\n                                this.popupBoomTan.show();\n                                break;\n                        } */\n                        this.dismiss();\n                        Global.LobbyController.panelNotLogin.active = false;\n                        Global.LobbyController.panelLogined.active = true;\n                        break;\n                    case 1005:\n                        App.instance.showLoading(false);\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang(\"txt_login_username_error\"));\n                        break;\n                    case 1109:\n                        App.instance.showLoading(false);\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_blocked'));\n                        break;\n\n                    case 1114:\n                        App.instance.showLoading(false);\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_password_error'));\n                        break;\n                    case 1002:\n                        App.instance.showLoading(false);\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_incorrect_otp'));\n                        break;\n                    case 1007:\n                        App.instance.showLoading(false);\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_name_not_the_same'));\n                        break;\n                    case 1021: case 1008:\n                        App.instance.showLoading(false);\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_incorrect_otp'));\n                        break;\n                    case 2001:\n                        App.instance.showLoading(false);\n                        // App.instance.alertDialog.showMsg(\"Tên nhân vật không được để trống.\");\n                        break;\n\n                    default:\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_error'));\n                        break;\n                }\n            });\n        }\n\n\n    }\n}\nexport default Lobby.PopupRegister;\n"]}
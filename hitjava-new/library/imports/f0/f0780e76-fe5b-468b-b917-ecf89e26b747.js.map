{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Payment\\LobbyShop.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Configs from \"../../../Loading/src/Configs\";\nimport Http from \"../../../Loading/src/Http\";\nimport App from \"../Script/common/App\";\nimport Dialog from \"../Script/common/Dialog\";\nimport Utils from \"../Script/common/Utils\";\nimport BaseTabShop from \"./BaseTabShop\";\n\nconst { ccclass, property } = cc._decorator;\nconst NAME_TABS = { \"paywell\": 0, \"royalpay\": 1, \"princepay\": 2, \"bank\": 8, \"clickpay\": 4, \"payasec\": 5, \"chuyenkhoan\": 6, \"napthe\": 7, \"manualbank\": 3, \"gift\": 9};\n\n\n@ccclass\nexport default class LobbyShop extends Dialog {\n\n\n    @property([BaseTabShop])\n    tabs: BaseTabShop[] = [];\n    @property([cc.Node])\n    btnTabs: cc.Node[] = [];\n\n    private data = null;\n    private indexTabCurrent = 0;\n    show() {\n        super.show();\n        App.instance.showLoading(true);\n        if (Configs.Login.ListPayment == null) {\n            Http.get(Configs.App.API, { \"c\": 2002, \"nn\": Configs.Login.Nickname, \"at\": Configs.Login.AccessToken, pt: 1 }, (err, res) => {\n                App.instance.showLoading(false);\n                if (err != null) {\n                    return;\n                }\n                if (!res[\"success\"]) {\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_check_connect'));\n                    this.dismiss();\n                    return;\n                }\n                App.instance.showLoading(false);\n                Configs.Login.ListPayment = this.data = res.data;\n                //  cc.log(\"Paymen:\",res.data);\n\n                this.node.active = true;\n                this.showTabsAlive();\n            });\n        }\n        else {\n            App.instance.showLoading(false);\n            this.node.active = true;\n            this.showTabsAlive();\n        }\n\n\n    }\n\n    showTabsAlive() {\n\n        for (var i = 0; i < this.btnTabs.length; i++) {\n            if (this.btnTabs[i] != null) {\n                this.btnTabs[i].active = false;\n                this.btnTabs[i].getComponent(cc.Toggle).isChecked = false;\n            }\n        }\n        //  cc.log(\"showTabsAlive:\" + JSON.stringify(Configs.Login.ListPayment));\n        var isFind = false;\n        for (var i = 0; i < Configs.Login.ListPayment.length; i++) {\n            if (Configs.Login.ListPayment[i].providerConfig.status == 1) {\n                if (NAME_TABS[Configs.Login.ListPayment[i].providerName] != null) {\n                    if (this.btnTabs[NAME_TABS[Configs.Login.ListPayment[i].providerName]]) {\n                        this.btnTabs[NAME_TABS[Configs.Login.ListPayment[i].providerName]].active = true;\n                        if (isFind == false) {\n                            this.onBtnChoseTab(null, Configs.Login.ListPayment[i].providerName);\n                            isFind = true;\n                        }\n                        else if (Configs.Login.ListPayment[i].providerName == \"princepay\") {\n                            this.onBtnChoseTab(null, Configs.Login.ListPayment[i].providerName);\n                            isFind = true;\n                        }\n\n                    }\n\n                }\n            }\n        }\n    }\n\n\n\n    onBtnChoseTab(target, data) {\n        this.tabs[this.indexTabCurrent].hide();\n\n        var nameTab = data;\n        var dataTab = null;\n        this.indexTabCurrent = NAME_TABS[nameTab];\n        for (var i = 0; i < Configs.Login.ListPayment.length; i++) {\n            if (Configs.Login.ListPayment[i].providerName == nameTab) {\n                dataTab = Configs.Login.ListPayment[i];\n            }\n        }\n        this.tabs[this.indexTabCurrent].show(dataTab);\n        this.btnTabs[this.indexTabCurrent].getComponent(cc.Toggle).isChecked = true;\n    }\n}\n"]}
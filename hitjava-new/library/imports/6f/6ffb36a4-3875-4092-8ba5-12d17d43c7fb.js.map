{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Payment\\TabPopupBank.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Configs from \"../../../Loading/src/Configs\";\nimport Http from \"../../../Loading/src/Http\";\nimport cmd from \"../Lobby.Cmd\";\nimport App from \"../Script/common/App\";\nimport Utils from \"../Script/common/Utils\";\nimport MiniGameNetworkClient from \"../Script/networks/MiniGameNetworkClient\";\nimport BaseTabShop from \"./BaseTabShop\";\n\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport class TabPopupBank extends BaseTabShop {\n\n\n    @property(cc.Label)\n    lblBankNumber: cc.Label = null;\n    @property(cc.Label)\n    lblBankAccountName: cc.Label = null;\n    @property(cc.Label)\n    lblBankAddress: cc.Label = null;\n\n    @property(cc.Label)\n    lblTransNote: cc.Label = null;\n\n\n    @property(cc.Node)\n    dropdownBank: Node = null;\n\n    @property(cc.EditBox)\n    edbAmount: cc.EditBox = null;\n\n    private _listBank = [];\n\n    start() {\n        this.lblTransNote.string = App.instance.getTextLang('txt_bank_transfer_note_9') + Configs.Login.Nickname;\n        App.instance.showLoading(true);\n\n\n        this.dropdownBank = this.dropdownBank.getComponent(\"DropDown\");\n        Http.get(Configs.App.API, { \"c\": 130 }, (err, res) => {\n            App.instance.showLoading(false);\n            if (err == null) {\n                if (res.list_bank === undefined || res.list_bank.length == 0) {\n\n                    return;\n                }\n\n                let listBank = res.list_bank;\n                this._listBank = listBank;\n\n\n                let bankName = [{ optionString: App.instance.getTextLang(\"txt_select_bank\") }];\n                for (let i = 0; i < listBank.length; i++) {\n                    bankName.push({ optionString: listBank[i].bankName });\n                }\n                this.dropdownBank.clearOptionDatas();\n                this.dropdownBank.addOptionDatas(bankName);\n                this.dropdownBank.selectedIndex = 0;\n                this.dropdownBank.setCallBack((idx) => {\n                    if (idx > 0) {\n                        this.lblBankAddress.string = listBank[idx - 1].bankAddress;\n                        this.lblBankAccountName.string = listBank[idx - 1].bankAccountName;\n                        this.lblBankNumber.string = listBank[idx - 1].bankNumber;\n                    } else {\n                        this.lblBankAddress.string = \"\";\n                        this.lblBankAccountName.string = \"\";\n                        this.lblBankNumber.string = \"\";\n                    }\n\n\n                })\n            }\n        });\n\n    }\n\n    show(data) {\n         //Utils.Log(\"showTabBank:\" + JSON.stringify(data));\n        let listBank = data.providerConfig.banks;\n        this._listBank = listBank;\n\n\n        let bankName = [{ optionString: App.instance.getTextLang(\"txt_select_bank\") }];\n        for (let i = 0; i < listBank.length; i++) {\n            bankName.push({ optionString: listBank[i].name });\n        }\n        this.dropdownBank.clearOptionDatas();\n        this.dropdownBank.addOptionDatas(bankName);\n        this.dropdownBank.selectedIndex = 0;\n        this.dropdownBank.setCallBack((idx) => {\n            if (idx > 0) {\n                this.lblBankAddress.string = listBank[idx - 1].bankAddress;\n                this.lblBankAccountName.string = listBank[idx - 1].bankAccountName;\n                this.lblBankNumber.string = listBank[idx - 1].bankNumber;\n            } else {\n                this.lblBankAddress.string = \"\";\n                this.lblBankAccountName.string = \"\";\n                this.lblBankNumber.string = \"\";\n            }\n\n\n        })\n    }\n\n    submit() {\n        let ddBank = this.dropdownBank.selectedIndex;\n        if (ddBank == 0) {\n            App.instance.alertDialog.showMsg(App.instance.getTextLang(\"txt_select_bank1\"));\n            return;\n        }\n\n        let bankSelected = this._listBank[ddBank - 1].bankNumber;\n\n        let amount = Utils.formatEditBox(this.edbAmount.string);\n        if (amount < 10000) {\n            App.instance.ShowAlertDialog(App.instance.getTextLang('txt_cash_in_min') + \"10.000\");\n            return;\n        }\n        if (amount > 200000) {\n            App.instance.ShowAlertDialog(App.instance.getTextLang('txt_cash_in_max') + \"200.000\");\n            return;\n        }\n\n        var self = this;\n        App.instance.showLoading(true, -1);\n        var request = {\n            \"c\": 2003,\n            \"fn\": bankSelected,\n            \"am\": amount,\n            \"nn\": Configs.Login.Nickname,\n            \"at\": Configs.Login.AccessToken,\n            \"pn\": \"manualbank\"\n        };\n\n         //Utils.Log(\"request sieutoc:\" + JSON.stringify(request) + \" : tabWell:\" + self.tabWell);\n        Http.get(Configs.App.API, request, (err, res) => {\n            App.instance.showLoading(false);\n             //Utils.Log(\" res:\" + JSON.stringify(res));\n            if (res.success == true) {\n                 //Utils.Log(\"princePay:\" + JSON.stringify(res));\n\n            }\n            else {\n                App.instance.ShowAlertDialog(res.message);\n            }\n\n\n        });\n\n\n        App.instance.showLoading(true);\n        MiniGameNetworkClient.getInstance().send(new cmd.ReqDepositBank(bankSelected, amount));\n    }\n\n\n\n\n}"]}
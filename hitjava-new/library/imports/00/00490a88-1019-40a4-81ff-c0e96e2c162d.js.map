{"version":3,"sources":["assets\\Lobby\\LobbyScript\\TienLenScript\\TienLen.Playerz.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Configs from \"../../../Loading/src/Configs\";\nimport App from \"../Script/common/App\";\nimport Utils from \"../Script/common/Utils\";\nimport Card from \"./TienLen.Card\";\nimport Res from \"./TienLen.Resz\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Player extends cc.Component {\n\n    @property(cc.Label)\n    lblNickname: cc.Label = null;\n    @property(cc.Label)\n    lblCoin: cc.Label = null;\n    @property(cc.Sprite)\n    avatar: cc.Sprite = null;\n    @property(cc.Sprite)\n    card: cc.Sprite = null;\n    @property(cc.Label)\n    lblCardRemain: cc.Label = null;\n    @property(cc.Sprite)\n    timeRemain: cc.Sprite = null;\n    @property(cc.Label)\n    lbStatus: cc.Label = null;\n    @property(cc.Node)\n    cardLine: cc.Node = null;\n\n    @property(cc.Node)\n    chatEmotion: cc.Node = null;\n    @property(cc.Node)\n    chatMsg: cc.Node = null;\n\n    ingame = false;\n    active = false;\n    chairLocal = -1;\n    chairInServer = -1;\n    type = 1;\n    cards = [];\n    state = 0;\n    status = -1;\n    info = null\n\n    runRemain = null;\n\n    private timeoutChat = null;\n\n    setPlayerInfo(info) {\n        //  cc.log(\"TLMN setPlayerInfo : \", info);\n        this.lblNickname.string = info.nickName;\n        this.setCoin(info.money);\n        this.avatar.spriteFrame = App.instance.getAvatarSpriteFrame(info.avatar);\n        this.node.active = true;\n\n        this.active = true;\n        this.info = info;\n        this.offFirstCard();\n    }\n\n    setFirstCard(index) {\n        this.card.spriteFrame = Res.getInstance().getCardFace(index);\n        this.card.node.active = true;\n        this.lblCardRemain.node.active = false;\n    }\n\n    offFirstCard() {\n        this.card.node.active = false;\n        this.card.spriteFrame = Res.getInstance().getCardFace(52);\n    }\n\n    setCardRemain(cardSize) {\n        if (cardSize == 0) {\n            this.card.node.active = false;\n            return;\n        }\n        this.card.spriteFrame = Res.getInstance().getCardFace(52);\n        this.card.node.active = true;\n        this.lblCardRemain.node.active = true;\n        this.lblCardRemain.string = cardSize;\n    }\n\n    setTimeRemain(remain = 0) {\n        //  cc.log(\"OOOOOOOOOOOOOOOO : \", remain);\n        if (remain == 0) {\n            clearInterval(this.runRemain);\n            this.timeRemain.fillRange = 0;\n            return;\n        } else {\n            var refresh = 100;\n            var step = refresh / remain / 1000;\n            var sefl = this;\n            var change = function () {\n                if (!sefl || !sefl.timeRemain)\n                    return;\n                if (sefl.timeRemain.fillRange <= 0) {\n                    clearInterval(sefl.runRemain);\n                    sefl.timeRemain.fillRange = 0;\n                    return;\n                }\n                sefl.timeRemain.fillRange -= step;\n            }\n            this.timeRemain.fillRange = 1;\n            this.runRemain = setInterval(change, refresh);\n        }\n    }\n\n    clearTimeRemain() {\n        this.timeRemain.fillRange = 0;\n    }\n\n    setStatus(status = \"\") {\n        var stt = status.toUpperCase();\n        this.lbStatus.string = stt;\n    }\n\n    setNotify(data) {\n        this.lbStatus.string = data;\n        setTimeout(() => {\n            this.lbStatus.string = \"\";\n        }, 1000)\n    }\n\n    setCoin(coin) {\n        this.lblCoin.string = Utils.formatNumber(coin);\n    }\n\n    setCoinChange(change) {\n        if (change > 0) {\n            //  cc.log(\"GGGG hide setCoinChange change : \", change);\n            this.lbStatus.node.active = true;\n            this.lbStatus.string = \"+\" + Utils.formatNumber(change);\n        } else if (change < 0) {\n            this.lbStatus.node.active = true;\n            this.lbStatus.string = Utils.formatNumber(change);\n        }\n    }\n\n    setLeaveRoom() {\n        this.node.active = false;\n        this.active = false;\n        this.info = null;\n    }\n\n    setCardLine(cards) {\n        cards.forEach(card => {\n            var item = cc.instantiate(Res.getInstance().getCardItem());\n            item.parent = this.cardLine;\n            item.removeComponent(cc.Button);\n            item.getComponent(Card).setCardData(card);\n        });\n    }\n\n    clearCardLine() {\n        this.cardLine.removeAllChildren();\n    }\n\n    showChatEmotion(content) {\n        this.chatEmotion.active = true;\n        this.chatMsg.active = false;\n        clearTimeout(this.timeoutChat);\n        this.chatEmotion.getComponent(sp.Skeleton).setAnimation(0, content, true);\n        this.timeoutChat = setTimeout(() => {\n            this.chatEmotion.active = false;\n            this.chatMsg.active = false;\n        }, 3000);\n    }\n\n    showChatMsg(content) {\n        this.chatEmotion.active = false;\n        this.chatMsg.active = true;\n        clearTimeout(this.timeoutChat);\n        this.chatMsg.children[1].getComponent(cc.Label).string = content;\n        this.timeoutChat = setTimeout(() => {\n            this.chatEmotion.active = false;\n            this.chatMsg.active = false;\n        }, 3000);\n    }\n\n    hideChat() {\n        clearTimeout(this.timeoutChat);\n        this.chatEmotion.active = false;\n        this.chatMsg.active = false;\n    }\n}\n\n\n"]}
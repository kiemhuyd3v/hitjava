
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Lobby/LobbyScript/TienLenScript/TienLen.GameLogic.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '08228u2XutF3JBcqOtbtrTL', 'TienLen.GameLogic');
// Lobby/LobbyScript/TienLenScript/TienLen.GameLogic.ts

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Utils_1 = require("../Script/common/Utils");
var GameData_1 = require("../Script/games/GameData");
var TienLen_Constant_1 = require("./TienLen.Constant");
var TienLen_Player_1 = require("./TienLen.Player");
var TienLenGameLogic = /** @class */ (function () {
    function TienLenGameLogic() {
        this.roomOwnerID = 0;
        this.roomOwner = 0;
        this.bet = 0;
        this.myChair = -1;
        this.roomLock = !1;
        this.roomId = 0;
        this.roomIndex = 0;
        this.roomJackpot = 0;
        this.players = [];
        this.gameState = -1;
        this.typeToiTrang = 0;
        this.timeBaoSam = 0;
        this.timeAutoStart = 0;
        this.cardChiabai = [];
        this.cardDanhBai = [];
        this.firstTurnCards = [];
        this.changeTurnChair = -1;
        this.activeLocalChair = -1;
        this.newRound = !0;
        this.gameAction = -1;
        this.cards = [];
        this.activeTimeRemain = 0;
        this.moneyType = 1;
        this.gameId = 0;
        this.gameServerState = null;
        this.baoSam = null;
        this.boLuot = null;
        this.toiTrang = null;
        this.recentCards = [];
        this.cardSizes = [];
        this.handCardSizeSize = 0;
        this.chairLastTurn = -1;
        this.roomOwnerID = this.roomOwner = this.bet = 0;
        this.myChair = -1;
        this.roomLock = !1;
        this.roomId = this.roomIndex = this.roomJackpot = 0;
        this.players = [];
        this.gameState = -1;
        this.typeToiTrang = this.timeBaoSam = this.timeAutoStart = 0;
        this.cardChiabai = [];
        this.cardDanhBai = [];
        this.firstTurnCards = [];
        this.changeTurnChair = this.activeLocalChair = -1;
        this.newRound = !0;
        this.gameAction = -1;
        this.cards = [];
        for (var a = this.activeTimeRemain = 0; a < TienLen_Constant_1.default.Config.MAX_PLAYER; a++) {
            var b = new TienLen_Player_1.default();
            0 == a && (b.type = TienLen_Constant_1.default.PlayerType.MY);
            this.players.push(b);
        }
    }
    TienLenGameLogic.getInstance = function () {
        if (this.instance == null) {
            this.instance = new TienLenGameLogic();
        }
        return this.instance;
    };
    TienLenGameLogic.prototype.initReconnect = function (a) {
        cc.sys.localStorage.setItem("outRoom", "0");
        GameData_1.default.getInstance().maxPlayer = a.maxPlayer;
        // 2 == gameData.maxPlayer ? GameManager.getInstance().currentGame = 4 : GameManager.getInstance().currentGame = 5;
        this.gameState = TienLen_Constant_1.default.GameState.PLAYCONTINUE;
        this.bet = a.roomBet;
        this.moneyType = a.moneyType;
        this.roomOwner = a.roomOwner;
        this.roomId = a.roomId;
        this.gameId = a.gameId;
        this.myChair = a.myChair;
        this.cardChiabai = [];
        //Utils.Log("cardChidBai size" + a.cards.length);
        for (var b = 0; b < a.cards.length; b++)
            this.cardChiabai.push(a.cards[b]), //Utils.Log("carChiabai " + a.cards[b]);
                this.gameServerState = a.gameServerState;
        this.gameAction = a.gameAction;
        this.activeTimeRemain = a.activeTimeRemain;
        this.changeTurnChair = this.activeLocalChair = this.convertChair(a.currentChair);
        this.baoSam = a.baoSam;
        this.boLuot = a.boLuot;
        this.toiTrang = a.toiTrang;
        this.recentCards = [];
        for (var b = 0; b < a.recentCards.length; b++)
            this.recentCards.push(a.recentCards[b]);
        for (var b = 0; b < this.players.length; b++)
            this.players[b].ingame = !1;
        for (var b = 0; b < GameData_1.default.getInstance().maxPlayer; b++) {
            var c = this.convertChair(b);
            0 != a.playerStatus[b] && (Utils_1.default.Log("playI: " + b + " " + c), this.players[c].ingame = !0, this.players[c].active = !0, this.players[c].info = a.playerInfos[b], Utils_1.default.Log("pkPlayerInfos" + a.playerInfos[b].nickName), this.players[c].status = a.playerStatus[b], this.players[c].chairInServer = b, this.players[c].chairLocal = c);
        }
    };
    TienLenGameLogic.prototype.initWith = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.JOINROOM;
        this.bet = a.moneyBet;
        this.moneyType = a.moneyType;
        this.roomOwner = a.roomOwner;
        this.roomId = a.roomId;
        this.gameId = a.gameId;
        this.myChair = a.myChair;
        this.gameId = a.gameId;
        this.gameAction = a.gameAction;
        this.activeTimeRemain = a.activeTimeRemain;
        this.changeTurnChair = this.activeLocalChair = this.convertChair(a.currentChair);
        this.cardSizes = [];
        for (b = 0; b < this.handCardSizeSize; b++)
            this.cardSizes.push(a.handCardSize[b]);
        for (var b = 0; b < this.players.length; b++)
            this.players[b].ingame = !1;
        for (b = 0; b < GameData_1.default.getInstance().maxPlayer; b++) {
            var c = this.convertChair(b);
            0 != a.playerStatus[b] && (this.players[c].ingame = !0, this.players[c].active = !0, this.players[c].info = a.playerInfos[b], this.players[c].status = a.playerStatus[b], this.players[c].chairInServer = b, this.players[c].chairLocal = c, this.players[c].remainCard = a.handCardSize[b]);
        }
    };
    TienLenGameLogic.prototype.convertChair = function (a) {
        a = (a - this.myChair + 4) % 4;
        2 == GameData_1.default.getInstance().maxPlayer ? 0 != a && (a = 2) : 0 != a && (a = TienLen_Constant_1.default.Config.MAX_PLAYER - a);
        return a;
    };
    TienLenGameLogic.prototype.numberPlayer = function () {
        for (var a = 0, b = 0; b < TienLen_Constant_1.default.Config.MAX_PLAYER; b++)
            this.players[b].ingame && 1 < this.players[b].status && a++;
        return a;
    };
    TienLenGameLogic.prototype.userJoinRoom = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.USERJOIN;
        var b = this.convertChair(a.uChair);
        this.activeLocalChair = b;
        this.players[b].ingame = !0;
        this.players[b].active = !0;
        this.players[b].info = a.info;
        this.players[b].status = a.uStatus;
        this.players[b].chairInServer = a.uChair;
    };
    TienLenGameLogic.prototype.updateOwnerRoom = function (a) {
        this.roomOwner = a.chair;
        this.gameState = TienLen_Constant_1.default.GameState.UPDATEOWNERROOM;
    };
    TienLenGameLogic.prototype.autoStart = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.AUTOSTART;
        this.timeAutoStart = a.autoStartTime;
    };
    TienLenGameLogic.prototype.firstTurn = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.FIRSTTURN;
        this.firstTurnCards = [0,
            0, 0, 0, 0
        ];
        if (a.isRandom)
            for (var b = 0; b < a.cards.length && b < GameData_1.default.getInstance().maxPlayer; b++)
                this.firstTurnCards[this.convertChair(b)] = a.cards[b];
        for (b = 0; b < TienLen_Constant_1.default.Config.MAX_PLAYER; b++)
            Utils_1.default.Log("this.firstTurn: " + b + " " + this.firstTurnCards[b]);
    };
    TienLenGameLogic.prototype.chiabai = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.CHIABAI;
        this.cardChiabai = a.cards;
        this.timeBaoSam = a.timeBaoSam;
        this.gameId = a.gameId;
    };
    TienLenGameLogic.prototype.danhbai = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.DANHBAI;
        this.cardDanhBai = a.cards;
        a = this.convertChair(a.chair);
        0 <= a && 4 >= a && (this.activeLocalChair =
            a);
    };
    TienLenGameLogic.prototype.boluot = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.BOLUOT;
    };
    TienLenGameLogic.prototype.notifyOutRoom = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.NOTIFYOUTROOM;
    };
    TienLenGameLogic.prototype.changeturn = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.CHANGETURN;
        this.newRound = a.newRound;
        var b = this.convertChair(a.chair);
        this.chairLastTurn = this.convertChair(a.chairLastTurn);
        //Utils.Log("chairLastTurn: " + this.chairLastTurn);
        this.changeTurnChair = this.activeLocalChair = b;
    };
    TienLenGameLogic.prototype.waitBonDoiThong = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.WAITBONDOITHONG;
        //Utils.Log("server.chair: " +
        a.chair;
        ;
        this.chairLastTurn = this.convertChair(a.chair);
        //Utils.Log("chairLastTurn: " + this.chairLastTurn);
    };
    TienLenGameLogic.prototype.quitRoom = function () {
        this.gameState = TienLen_Constant_1.default.GameState.QUIT;
    };
    TienLenGameLogic.prototype.chatchong = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.CHATCHONG;
        var b = this.convertChair(a.winChair), c = this.convertChair(a.lostChair);
        // 0 == b ? lobby.updateMoney(a.winMoney, this.moneyType) : 0 == c && lobby.updateMoney(a.lostMoney, this.moneyType);
        this.players[b].info.money = a.winCurrentMoney;
        this.players[c].info.money = a.lostCurrentMoney;
    };
    TienLenGameLogic.prototype.baosam = function (a) {
        // this.gameState =
        //     TienLenConstant.GameState.BAOSAM;
    };
    TienLenGameLogic.prototype.huybaosam = function (a) {
        // this.gameState = TienLenConstant.GameState.HUYBAOSAM
    };
    TienLenGameLogic.prototype.quyetdinhsam = function (a) {
        // this.gameState = TienLenConstant.GameState.QUYETDINHSAM
    };
    TienLenGameLogic.prototype.jackpot = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.JACKPOT;
    };
    TienLenGameLogic.prototype.userLeave = function (a) {
        var b = this.convertChair(a.chair);
        0 <= b && 3 >= b && a.nickName == this.players[b].info.nickName && (this.players[b].ingame = !1, this.activeLocalChair = b);
        this.gameState = TienLen_Constant_1.default.GameState.USERLEAVE;
    };
    TienLenGameLogic.prototype.endGame = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.ENDGAME;
        this.roomJackpot = a.roomJackpot;
        // for (var i = 0; i < a.currentMoney.length && i < GameData.getInstance().maxPlayer; i++)
        //     this.players[this.convertChair(i)].info && (this.players[this.convertChair(i)].info.money = a.currentMoney[i], 0 == this.convertChair(i) && lobby.updateMoney(a.currentMoney[i], this.moneyType));
        //Utils.Log("endGame");
    };
    TienLenGameLogic.prototype.updateMath = function (a) {
        this.gameState = TienLen_Constant_1.default.GameState.UPDATEMATH;
        this.myChair = a.myChair;
        this.roomOwner = a.ownerChair;
        for (var b = 0; b < a.hasInfo.length && b < GameData_1.default.getInstance().maxPlayer; b++)
            if (a.hasInfo[b]) {
                var c = this.convertChair(b);
                this.players[c].ingame &&
                    (this.players[c].info.money = a.infos[b].money, this.players[c].active = !0, this.players[c].status = a.infos[b].status);
            }
    };
    return TienLenGameLogic;
}());
exports.default = TienLenGameLogic;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcTG9iYnlcXExvYmJ5U2NyaXB0XFxUaWVuTGVuU2NyaXB0XFxUaWVuTGVuLkdhbWVMb2dpYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGdEQUEyQztBQUMzQyxxREFBZ0Q7QUFDaEQsdURBQWlEO0FBQ2pELG1EQUFzQztBQUV0QztJQTJDSTtRQXhDQSxnQkFBVyxHQUFHLENBQUMsQ0FBQztRQUNoQixjQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsUUFBRyxHQUFHLENBQUMsQ0FBQztRQUNSLFlBQU8sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNiLGFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNkLFdBQU0sR0FBRyxDQUFDLENBQUM7UUFDWCxjQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsZ0JBQVcsR0FBRyxDQUFDLENBQUM7UUFDaEIsWUFBTyxHQUFHLEVBQUUsQ0FBQztRQUNiLGNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNmLGlCQUFZLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLGVBQVUsR0FBRyxDQUFDLENBQUM7UUFDZixrQkFBYSxHQUFHLENBQUMsQ0FBQztRQUNsQixnQkFBVyxHQUFHLEVBQUUsQ0FBQztRQUNqQixnQkFBVyxHQUFHLEVBQUUsQ0FBQztRQUNqQixtQkFBYyxHQUFHLEVBQUUsQ0FBQztRQUNwQixvQkFBZSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JCLHFCQUFnQixHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLGFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNkLGVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNoQixVQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ1gscUJBQWdCLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLGNBQVMsR0FBRyxDQUFDLENBQUM7UUFDZCxXQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsb0JBQWUsR0FBRyxJQUFJLENBQUM7UUFDdkIsV0FBTSxHQUFHLElBQUks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RyxDQUFDLENBQUMsVUFBVSxDQUFDO1FBQzlCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sSUFBSSxDQUFDLEdBQUcsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFO1lBQzdFLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDZCxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM3QixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU07b0JBQ2xCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUE7YUFDL0g7SUFDVCxDQUFDO0lBQ0wsdUJBQUM7QUFBRCxDQTdQQSxBQTZQQyxJQUFBIiwiZmlsZSI6IiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFV0aWxzIGZyb20gXCIuLi9TY3JpcHQvY29tbW9uL1V0aWxzXCI7XG5pbXBvcnQgR2FtZURhdGEgZnJvbSBcIi4uL1NjcmlwdC9nYW1lcy9HYW1lRGF0YVwiO1xuaW1wb3J0IFRpZW5MZW5Db25zdGFudCBmcm9tIFwiLi9UaWVuTGVuLkNvbnN0YW50XCI7XG5pbXBvcnQgUGxheWVyIGZyb20gXCIuL1RpZW5MZW4uUGxheWVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpZW5MZW5HYW1lTG9naWMge1xuICAgIHN0YXRpYyBpbnN0YW5jZTogVGllbkxlbkdhbWVMb2dpYztcblxuICAgIHJvb21Pd25lcklEID0gMDtcbiAgICByb29tT3duZXIgPSAwO1xuICAgIGJldCA9IDA7XG4gICAgbXlDaGFpciA9IC0xO1xuICAgIHJvb21Mb2NrID0gITE7XG4gICAgcm9vbUlkID0gMDtcbiAgICByb29tSW5kZXggPSAwO1xuICAgIHJvb21KYWNrcG90ID0gMDtcbiAgICBwbGF5ZXJzID0gW107XG4gICAgZ2FtZVN0YXRlID0gLTE7XG4gICAgdHlwZVRvaVRyYW5nID0gMDtcbiAgICB0aW1lQmFvU2FtID0gMDtcbiAgICB0aW1lQXV0b1N0YXJ0ID0gMDtcbiAgICBjYXJkQ2hpYWJhaSA9IFtdO1xuICAgIGNhcmREYW5oQmFpID0gW107XG4gICAgZmlyc3RUdXJuQ2FyZHMgPSBbXTtcbiAgICBjaGFuZ2VUdXJuQ2hhaXIgPSAtMTtcbiAgICBhY3RpdmVMb2NhbENoYWlyID0gLTE7XG4gICAgbmV3Um91bmQgPSAhMDtcbiAgICBnYW1lQWN0aW9uID0gLTE7XG4gICAgY2FyZHMgPSBbXTtcbiAgICBhY3RpdmVUaW1lUmVtYWluID0gMDtcbiAgICBtb25leVR5cGUgPSAxO1xuICAgIGdhbWVJZCA9IDA7XG4gICAgZ2FtZVNlcnZlclN0YXRlID0gbnVsbDtcbiAgICBiYW9TYW0gPSBudWxsO1xuICAgIGJvTHVvdCA9IG51bGw7XG4gICAgdG9pVHJhbmcgPSBudWxsO1xuICAgIHJlY2VudENhcmRzID0gW107XG4gICAgY2FyZFNpemVzID0gW107XG4gICAgaGFuZENhcmRTaXplU2l6ZSA9IDA7XG4gICAgY2hhaXJMYXN0VHVybiA9IC0xO1xuXG4gICAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBUaWVuTGVuR2FtZUxvZ2ljIHtcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBUaWVuTGVuR2FtZUxvZ2ljKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucm9vbU93bmVySUQgPSB0aGlzLnJvb21Pd25lciA9IHRoaXMuYmV0ID0gMDtcbiAgICAgICAgdGhpcy5teUNoYWlyID0gLTE7XG4gICAgICAgIHRoaXMucm9vbUxvY2sgPSAhMTtcbiAgICAgICAgdGhpcy5yb29tSWQgPSB0aGlzLnJvb21JbmRleCA9IHRoaXMucm9vbUphY2twb3QgPSAwO1xuICAgICAgICB0aGlzLnBsYXllcnMgPSBbXTtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUgPSAtMTtcbiAgICAgICAgdGhpcy50eXBlVG9pVHJhbmcgPSB0aGlzLnRpbWVCYW9TYW0gPSB0aGlzLnRpbWVBdXRvU3RhcnQgPSAwO1xuICAgICAgICB0aGlzLmNhcmRDaGlhYmFpID0gW107XG4gICAgICAgIHRoaXMuY2FyZERhbmhCYWkgPSBbXTtcbiAgICAgICAgdGhpcy5maXJzdFR1cm5DYXJkcyA9IFtdO1xuICAgICAgICB0aGlzLmNoYW5nZVR1cm5DaGFpciA9IHRoaXMuYWN0aXZlTG9jYWxDaGFpciA9IC0xO1xuICAgICAgICB0aGlzLm5ld1JvdW5kID0gITA7XG4gICAgICAgIHRoaXMuZ2FtZUFjdGlvbiA9IC0xO1xuICAgICAgICB0aGlzLmNhcmRzID0gW107XG4gICAgICAgIGZvciAodmFyIGEgPSB0aGlzLmFjdGl2ZVRpbWVSZW1haW4gPSAwOyBhIDwgVGllbkxlbkNvbnN0YW50LkNvbmZpZy5NQVhfUExBWUVSOyBhKyspIHtcbiAgICAgICAgICAgIHZhciBiID0gbmV3IFBsYXllcigpO1xuICAgICAgICAgICAgMCA9PSBhICYmIChiLnR5cGUgPSBUaWVuTGVuQ29uc3RhbnQuUGxheWVyVHlwZS5NWSk7XG4gICAgICAgICAgICB0aGlzLnBsYXllcnMucHVzaChiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGluaXRSZWNvbm5lY3QoYSkge1xuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJvdXRSb29tXCIsIFwiMFwiKTtcbiAgICAgICAgR2FtZURhdGEuZ2V0SW5zdGFuY2UoKS5tYXhQbGF5ZXIgPSBhLm1heFBsYXllcjtcbiAgICAgICAgLy8gMiA9PSBnYW1lRGF0YS5tYXhQbGF5ZXIgPyBHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLmN1cnJlbnRHYW1lID0gNCA6IEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuY3VycmVudEdhbWUgPSA1O1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IFRpZW5MZW5Db25zdGFudC5HYW1lU3RhdGUuUExBWUNPTlRJTlVFO1xuICAgICAgICB0aGlzLmJldCA9IGEucm9vbUJldDtcbiAgICAgICAgdGhpcy5tb25leVR5cGUgPSBhLm1vbmV5VHlwZTtcbiAgICAgICAgdGhpcy5yb29tT3duZXIgPSBhLnJvb21Pd25lcjtcbiAgICAgICAgdGhpcy5yb29tSWQgPSBhLnJvb21JZDtcbiAgICAgICAgdGhpcy5nYW1lSWQgPSBhLmdhbWVJZDtcbiAgICAgICAgdGhpcy5teUNoYWlyID0gYS5teUNoYWlyO1xuICAgICAgICB0aGlzLmNhcmRDaGlhYmFpID0gW107XG4gICAgICAgICAvL1V0aWxzLkxvZyhcImNhcmRDaGlkQmFpIHNpemVcIiArIGEuY2FyZHMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBhLmNhcmRzLmxlbmd0aDsgYisrKSB0aGlzLmNhcmRDaGlhYmFpLnB1c2goYS5jYXJkc1tiXSksICAvL1V0aWxzLkxvZyhcImNhckNoaWFiYWkgXCIgKyBhLmNhcmRzW2JdKTtcbiAgICAgICAgdGhpcy5nYW1lU2VydmVyU3RhdGUgPSBhLmdhbWVTZXJ2ZXJTdGF0ZTtcbiAgICAgICAgdGhpcy5nYW1lQWN0aW9uID0gYS5nYW1lQWN0aW9uO1xuICAgICAgICB0aGlzLmFjdGl2ZVRpbWVSZW1haW4gPSBhLmFjdGl2ZVRpbWVSZW1haW47XG4gICAgICAgIHRoaXMuY2hhbmdlVHVybkNoYWlyID0gdGhpcy5hY3RpdmVMb2NhbENoYWlyID0gdGhpcy5jb252ZXJ0Q2hhaXIoYS5jdXJyZW50Q2hhaXIpO1xuICAgICAgICB0aGlzLmJhb1NhbSA9IGEuYmFvU2FtO1xuICAgICAgICB0aGlzLmJvTHVvdCA9IGEuYm9MdW90O1xuICAgICAgICB0aGlzLnRvaVRyYW5nID0gYS50b2lUcmFuZztcbiAgICAgICAgdGhpcy5yZWNlbnRDYXJkcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IGEucmVjZW50Q2FyZHMubGVuZ3RoOyBiKyspIHRoaXMucmVjZW50Q2FyZHMucHVzaChhLnJlY2VudENhcmRzW2JdKTtcbiAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB0aGlzLnBsYXllcnMubGVuZ3RoOyBiKyspIHRoaXMucGxheWVyc1tiXS5pbmdhbWUgPSAhMTtcbiAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBHYW1lRGF0YS5nZXRJbnN0YW5jZSgpLm1heFBsYXllcjsgYisrKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMuY29udmVydENoYWlyKGIpO1xuICAgICAgICAgICAgMCAhPSBhLnBsYXllclN0YXR1c1tiXSAmJiAoIFV0aWxzLkxvZyhcInBsYXlJOiBcIiArIGIgKyBcIiBcIiArIGMpLCB0aGlzLnBsYXllcnNbY10uaW5nYW1lID0gITAsIHRoaXMucGxheWVyc1tjXS5hY3RpdmUgPSAhMCwgdGhpcy5wbGF5ZXJzW2NdLmluZm8gPSBhLnBsYXllckluZm9zW2JdLCAgVXRpbHMuTG9nKFwicGtQbGF5ZXJJbmZvc1wiICsgYS5wbGF5ZXJJbmZvc1tiXS5uaWNrTmFtZSksIHRoaXMucGxheWVyc1tjXS5zdGF0dXMgPSBhLnBsYXllclN0YXR1c1tiXSwgdGhpcy5wbGF5ZXJzW2NdLmNoYWlySW5TZXJ2ZXIgPSBiLCB0aGlzLnBsYXllcnNbY10uY2hhaXJMb2NhbCA9IGMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5pdFdpdGgoYSkge1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IFRpZW5MZW5Db25zdGFudC5HYW1lU3RhdGUuSk9JTlJPT007XG4gICAgICAgIHRoaXMuYmV0ID0gYS5tb25leUJldDtcbiAgICAgICAgdGhpcy5tb25leVR5cGUgPSBhLm1vbmV5VHlwZTtcbiAgICAgICAgdGhpcy5yb29tT3duZXIgPSBhLnJvb21Pd25lcjtcbiAgICAgICAgdGhpcy5yb29tSWQgPSBhLnJvb21JZDtcbiAgICAgICAgdGhpcy5nYW1lSWQgPSBhLmdhbWVJZDtcbiAgICAgICAgdGhpcy5teUNoYWlyID0gYS5teUNoYWlyO1xuICAgICAgICB0aGlzLmdhbWVJZCA9IGEuZ2FtZUlkO1xuICAgICAgICB0aGlzLmdhbWVBY3Rpb24gPSBhLmdhbWVBY3Rpb247XG4gICAgICAgIHRoaXMuYWN0aXZlVGltZVJlbWFpbiA9IGEuYWN0aXZlVGltZVJlbWFpbjtcbiAgICAgICAgdGhpcy5jaGFuZ2VUdXJuQ2hhaXIgPSB0aGlzLmFjdGl2ZUxvY2FsQ2hhaXIgPSB0aGlzLmNvbnZlcnRDaGFpcihhLmN1cnJlbnRDaGFpcik7XG4gICAgICAgIHRoaXMuY2FyZFNpemVzID0gW107XG4gICAgICAgIGZvciAoYiA9IDA7IGIgPCB0aGlzLmhhbmRDYXJkU2l6ZVNpemU7IGIrKykgdGhpcy5jYXJkU2l6ZXMucHVzaChhLmhhbmRDYXJkU2l6ZVtiXSk7XG4gICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgdGhpcy5wbGF5ZXJzLmxlbmd0aDsgYisrKSB0aGlzLnBsYXllcnNbYl0uaW5nYW1lID0gITE7XG4gICAgICAgIGZvciAoYiA9IDA7IGIgPCBHYW1lRGF0YS5nZXRJbnN0YW5jZSgpLm1heFBsYXllcjsgYisrKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMuY29udmVydENoYWlyKGIpO1xuICAgICAgICAgICAgMCAhPSBhLnBsYXllclN0YXR1c1tiXSAmJiAodGhpcy5wbGF5ZXJzW2NdLmluZ2FtZSA9ICEwLCB0aGlzLnBsYXllcnNbY10uYWN0aXZlID0gITAsIHRoaXMucGxheWVyc1tjXS5pbmZvID0gYS5wbGF5ZXJJbmZvc1tiXSwgdGhpcy5wbGF5ZXJzW2NdLnN0YXR1cyA9IGEucGxheWVyU3RhdHVzW2JdLCB0aGlzLnBsYXllcnNbY10uY2hhaXJJblNlcnZlciA9IGIsIHRoaXMucGxheWVyc1tjXS5jaGFpckxvY2FsID0gYywgdGhpcy5wbGF5ZXJzW2NdLnJlbWFpbkNhcmQgPSBhLmhhbmRDYXJkU2l6ZVtiXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb252ZXJ0Q2hhaXIoYSkge1xuICAgICAgICBhID0gKGEgLSB0aGlzLm15Q2hhaXIgKyA0KSAlIDQ7XG4gICAgICAgIDIgPT0gR2FtZURhdGEuZ2V0SW5zdGFuY2UoKS5tYXhQbGF5ZXIgPyAwICE9IGEgJiYgKGEgPSAyKSA6IDAgIT0gYSAmJiAoYSA9IFRpZW5MZW5Db25zdGFudC5Db25maWcuTUFYX1BMQVlFUiAtIGEpO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG5cbiAgICBudW1iZXJQbGF5ZXIoKSB7XG4gICAgICAgIGZvciAodmFyIGEgPSAwLCBiID0gMDsgYiA8IFRpZW5MZW5Db25zdGFudC5Db25maWcuTUFYX1BMQVlFUjsgYisrKSB0aGlzLnBsYXllcnNbYl0uaW5nYW1lICYmIDEgPCB0aGlzLnBsYXllcnNbYl0uc3RhdHVzICYmIGErKztcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfVxuXG4gICAgdXNlckpvaW5Sb29tKGEpIHtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUgPSBUaWVuTGVuQ29uc3RhbnQuR2FtZVN0YXRlLlVTRVJKT0lOO1xuICAgICAgICB2YXIgYiA9IHRoaXMuY29udmVydENoYWlyKGEudUNoYWlyKTtcbiAgICAgICAgdGhpcy5hY3RpdmVMb2NhbENoYWlyID0gYjtcbiAgICAgICAgdGhpcy5wbGF5ZXJzW2JdLmluZ2FtZSA9ICEwO1xuICAgICAgICB0aGlzLnBsYXllcnNbYl0uYWN0aXZlID0gITA7XG4gICAgICAgIHRoaXMucGxheWVyc1tiXS5pbmZvID0gYS5pbmZvO1xuICAgICAgICB0aGlzLnBsYXllcnNbYl0uc3RhdHVzID0gYS51U3RhdHVzO1xuICAgICAgICB0aGlzLnBsYXllcnNbYl0uY2hhaXJJblNlcnZlciA9IGEudUNoYWlyO1xuICAgIH1cblxuICAgIHVwZGF0ZU93bmVyUm9vbShhKSB7XG4gICAgICAgIHRoaXMucm9vbU93bmVyID0gYS5jaGFpcjtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUgPSBUaWVuTGVuQ29uc3RhbnQuR2FtZVN0YXRlLlVQREFURU9XTkVSUk9PTTtcbiAgICB9XG5cbiAgICBhdXRvU3RhcnQoYSkge1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IFRpZW5MZW5Db25zdGFudC5HYW1lU3RhdGUuQVVUT1NUQVJUO1xuICAgICAgICB0aGlzLnRpbWVBdXRvU3RhcnQgPSBhLmF1dG9TdGFydFRpbWU7XG4gICAgfVxuXG4gICAgZmlyc3RUdXJuKGEpIHtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUgPSBUaWVuTGVuQ29uc3RhbnQuR2FtZVN0YXRlLkZJUlNUVFVSTjtcbiAgICAgICAgdGhpcy5maXJzdFR1cm5DYXJkcyA9IFswLFxuICAgICAgICAgICAgMCwgMCwgMCwgMFxuICAgICAgICBdO1xuICAgICAgICBpZiAoYS5pc1JhbmRvbSlcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgYS5jYXJkcy5sZW5ndGggJiYgYiA8IEdhbWVEYXRhLmdldEluc3RhbmNlKCkubWF4UGxheWVyOyBiKyspIHRoaXMuZmlyc3RUdXJuQ2FyZHNbdGhpcy5jb252ZXJ0Q2hhaXIoYildID0gYS5jYXJkc1tiXTtcbiAgICAgICAgZm9yIChiID0gMDsgYiA8IFRpZW5MZW5Db25zdGFudC5Db25maWcuTUFYX1BMQVlFUjsgYisrKSAgVXRpbHMuTG9nKFwidGhpcy5maXJzdFR1cm46IFwiICsgYiArIFwiIFwiICsgdGhpcy5maXJzdFR1cm5DYXJkc1tiXSk7XG4gICAgfVxuXG4gICAgY2hpYWJhaShhKSB7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gVGllbkxlbkNvbnN0YW50LkdhbWVTdGF0ZS5DSElBQkFJO1xuICAgICAgICB0aGlzLmNhcmRDaGlhYmFpID0gYS5jYXJkcztcbiAgICAgICAgdGhpcy50aW1lQmFvU2FtID0gYS50aW1lQmFvU2FtO1xuICAgICAgICB0aGlzLmdhbWVJZCA9IGEuZ2FtZUlkO1xuICAgIH1cblxuICAgIGRhbmhiYWkoYSkge1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IFRpZW5MZW5Db25zdGFudC5HYW1lU3RhdGUuREFOSEJBSTtcbiAgICAgICAgdGhpcy5jYXJkRGFuaEJhaSA9IGEuY2FyZHM7XG4gICAgICAgIGEgPSB0aGlzLmNvbnZlcnRDaGFpcihhLmNoYWlyKTtcbiAgICAgICAgMCA8PSBhICYmIDQgPj0gYSAmJiAodGhpcy5hY3RpdmVMb2NhbENoYWlyID1cbiAgICAgICAgICAgIGEpO1xuICAgIH1cblxuICAgIGJvbHVvdChhKSB7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gVGllbkxlbkNvbnN0YW50LkdhbWVTdGF0ZS5CT0xVT1Q7XG4gICAgfVxuXG4gICAgbm90aWZ5T3V0Um9vbShhKSB7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gVGllbkxlbkNvbnN0YW50LkdhbWVTdGF0ZS5OT1RJRllPVVRST09NO1xuICAgIH1cblxuICAgIGNoYW5nZXR1cm4oYSkge1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IFRpZW5MZW5Db25zdGFudC5HYW1lU3RhdGUuQ0hBTkdFVFVSTjtcbiAgICAgICAgdGhpcy5uZXdSb3VuZCA9IGEubmV3Um91bmQ7XG4gICAgICAgIHZhciBiID0gdGhpcy5jb252ZXJ0Q2hhaXIoYS5jaGFpcik7XG4gICAgICAgIHRoaXMuY2hhaXJMYXN0VHVybiA9IHRoaXMuY29udmVydENoYWlyKGEuY2hhaXJMYXN0VHVybik7XG4gICAgICAgICAvL1V0aWxzLkxvZyhcImNoYWlyTGFzdFR1cm46IFwiICsgdGhpcy5jaGFpckxhc3RUdXJuKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VUdXJuQ2hhaXIgPSB0aGlzLmFjdGl2ZUxvY2FsQ2hhaXIgPSBiO1xuICAgIH1cblxuICAgIHdhaXRCb25Eb2lUaG9uZyhhKSB7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gVGllbkxlbkNvbnN0YW50LkdhbWVTdGF0ZS5XQUlUQk9ORE9JVEhPTkc7XG4gICAgICAgICAvL1V0aWxzLkxvZyhcInNlcnZlci5jaGFpcjogXCIgK1xuICAgICAgICAgICAgYS5jaGFpcik7XG4gICAgICAgIHRoaXMuY2hhaXJMYXN0VHVybiA9IHRoaXMuY29udmVydENoYWlyKGEuY2hhaXIpO1xuICAgICAgICAgLy9VdGlscy5Mb2coXCJjaGFpckxhc3RUdXJuOiBcIiArIHRoaXMuY2hhaXJMYXN0VHVybik7XG4gICAgfVxuXG4gICAgcXVpdFJvb20oKSB7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gVGllbkxlbkNvbnN0YW50LkdhbWVTdGF0ZS5RVUlUXG4gICAgfVxuXG4gICAgY2hhdGNob25nKGEpIHtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUgPSBUaWVuTGVuQ29uc3RhbnQuR2FtZVN0YXRlLkNIQVRDSE9ORztcbiAgICAgICAgdmFyIGIgPSB0aGlzLmNvbnZlcnRDaGFpcihhLndpbkNoYWlyKSxcbiAgICAgICAgICAgIGMgPSB0aGlzLmNvbnZlcnRDaGFpcihhLmxvc3RDaGFpcik7XG4gICAgICAgIC8vIDAgPT0gYiA/IGxvYmJ5LnVwZGF0ZU1vbmV5KGEud2luTW9uZXksIHRoaXMubW9uZXlUeXBlKSA6IDAgPT0gYyAmJiBsb2JieS51cGRhdGVNb25leShhLmxvc3RNb25leSwgdGhpcy5tb25leVR5cGUpO1xuICAgICAgICB0aGlzLnBsYXllcnNbYl0uaW5mby5tb25leSA9IGEud2luQ3VycmVudE1vbmV5O1xuICAgICAgICB0aGlzLnBsYXllcnNbY10uaW5mby5tb25leSA9IGEubG9zdEN1cnJlbnRNb25leTtcbiAgICB9XG5cbiAgICBiYW9zYW0oYSkge1xuICAgICAgICAvLyB0aGlzLmdhbWVTdGF0ZSA9XG4gICAgICAgIC8vICAgICBUaWVuTGVuQ29uc3RhbnQuR2FtZVN0YXRlLkJBT1NBTTtcbiAgICB9XG5cbiAgICBodXliYW9zYW0oYSkge1xuICAgICAgICAvLyB0aGlzLmdhbWVTdGF0ZSA9IFRpZW5MZW5Db25zdGFudC5HYW1lU3RhdGUuSFVZQkFPU0FNXG4gICAgfVxuXG4gICAgcXV5ZXRkaW5oc2FtKGEpIHtcbiAgICAgICAgLy8gdGhpcy5nYW1lU3RhdGUgPSBUaWVuTGVuQ29uc3RhbnQuR2FtZVN0YXRlLlFVWUVURElOSFNBTVxuICAgIH1cblxuICAgIGphY2twb3QoYSkge1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IFRpZW5MZW5Db25zdGFudC5HYW1lU3RhdGUuSkFDS1BPVDtcbiAgICB9XG5cbiAgICB1c2VyTGVhdmUoYSkge1xuICAgICAgICB2YXIgYiA9IHRoaXMuY29udmVydENoYWlyKGEuY2hhaXIpO1xuICAgICAgICAwIDw9IGIgJiYgMyA+PSBiICYmIGEubmlja05hbWUgPT0gdGhpcy5wbGF5ZXJzW2JdLmluZm8ubmlja05hbWUgJiYgKHRoaXMucGxheWVyc1tiXS5pbmdhbWUgPSAhMSwgdGhpcy5hY3RpdmVMb2NhbENoYWlyID0gYik7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gVGllbkxlbkNvbnN0YW50LkdhbWVTdGF0ZS5VU0VSTEVBVkU7XG4gICAgfVxuXG4gICAgZW5kR2FtZShhKSB7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlID0gVGllbkxlbkNvbnN0YW50LkdhbWVTdGF0ZS5FTkRHQU1FO1xuICAgICAgICB0aGlzLnJvb21KYWNrcG90ID0gYS5yb29tSmFja3BvdDtcbiAgICAgICAgLy8gZm9yICh2YXIgaSA9IDA7IGkgPCBhLmN1cnJlbnRNb25leS5sZW5ndGggJiYgaSA8IEdhbWVEYXRhLmdldEluc3RhbmNlKCkubWF4UGxheWVyOyBpKyspXG4gICAgICAgIC8vICAgICB0aGlzLnBsYXllcnNbdGhpcy5jb252ZXJ0Q2hhaXIoaSldLmluZm8gJiYgKHRoaXMucGxheWVyc1t0aGlzLmNvbnZlcnRDaGFpcihpKV0uaW5mby5tb25leSA9IGEuY3VycmVudE1vbmV5W2ldLCAwID09IHRoaXMuY29udmVydENoYWlyKGkpICYmIGxvYmJ5LnVwZGF0ZU1vbmV5KGEuY3VycmVudE1vbmV5W2ldLCB0aGlzLm1vbmV5VHlwZSkpO1xuICAgICAgICAgLy9VdGlscy5Mb2coXCJlbmRHYW1lXCIpO1xuICAgIH1cblxuICAgIHVwZGF0ZU1hdGgoYSkge1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IFRpZW5MZW5Db25zdGFudC5HYW1lU3RhdGUuVVBEQVRFTUFUSDtcbiAgICAgICAgdGhpcy5teUNoYWlyID0gYS5teUNoYWlyO1xuICAgICAgICB0aGlzLnJvb21Pd25lciA9IGEub3duZXJDaGFpcjtcbiAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBhLmhhc0luZm8ubGVuZ3RoICYmIGIgPCBHYW1lRGF0YS5nZXRJbnN0YW5jZSgpLm1heFBsYXllcjsgYisrKVxuICAgICAgICAgICAgaWYgKGEuaGFzSW5mb1tiXSkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5jb252ZXJ0Q2hhaXIoYik7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJzW2NdLmluZ2FtZSAmJlxuICAgICAgICAgICAgICAgICAgICAodGhpcy5wbGF5ZXJzW2NdLmluZm8ubW9uZXkgPSBhLmluZm9zW2JdLm1vbmV5LCB0aGlzLnBsYXllcnNbY10uYWN0aXZlID0gITAsIHRoaXMucGxheWVyc1tjXS5zdGF0dXMgPSBhLmluZm9zW2JdLnN0YXR1cylcbiAgICAgICAgICAgIH1cbiAgICB9XG59Il19
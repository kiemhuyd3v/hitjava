{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Lobby.PopupBoomTan.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport Http from \"../../Loading/src/Http\";\nimport Configs from \"../../Loading/src/Configs\";\nimport App from \"./Script/common/App\";\nimport Dialog from \"./Script/common/Dialog\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PopupBoomTan extends Dialog {\n\n    @property(cc.Node)\n    itemTemplate: cc.Node = null;\n    @property([cc.SpriteFrame])\n    sfRanks: cc.SpriteFrame[] = [];\n    @property([cc.SpriteFrame])\n    sfGifts: cc.SpriteFrame[] = [];\n\n    show() {\n        super.show();\n        for (let i = 0; i < this.itemTemplate.parent.childrenCount; i++) {\n            this.itemTemplate.parent.children[i].active = false;\n        }\n    }\n\n    dismiss() {\n        super.dismiss();\n        for (let i = 0; i < this.itemTemplate.parent.childrenCount; i++) {\n            this.itemTemplate.parent.children[i].active = false;\n        }\n    }\n\n    _onShowed() {\n        super._onShowed();\n        this.loadData();\n    }\n\n    private getItem(): cc.Node {\n        let item = null;\n        for (let i = 0; i < this.itemTemplate.parent.childrenCount; i++) {\n            let node = this.itemTemplate.parent.children[i];\n            if (node != this.itemTemplate && !node.active) {\n                item = node;\n                break;\n            }\n        }\n        if (item == null) {\n            item = cc.instantiate(this.itemTemplate);\n            item.parent = this.itemTemplate.parent;\n        }\n        item.active = true;\n        return item;\n    }\n\n    private loadData() {\n        App.instance.showLoading(true);\n        let url = Configs.App.DOMAIN + \"boom_tan.json\";\n        Http.get(url, null, (err, res) => {\n            App.instance.showLoading(false);\n            if (err != null) return;\n            for (let i = 0; i < res.length; i++) {\n                let itemData = res[i];\n                let item = this.getItem();\n                let sfGift = this.getGiftSpriteFrame(itemData[\"gift\"]);\n                if (sfGift != null) {\n                    item.getChildByName(\"SprGift\").active = true;\n                    item.getChildByName(\"SprGift\").getComponent(cc.Sprite).spriteFrame = sfGift;\n                    item.getChildByName(\"Gift\").active = false;\n                } else {\n                    item.getChildByName(\"Gift\").active = true;\n                    item.getChildByName(\"Gift\").getComponent(cc.Label).string = itemData[\"gift\"];\n                    item.getChildByName(\"SprGift\").active = false;\n                }\n                if (i < this.sfRanks.length) {\n                    item.getChildByName(\"SprRank\").active = true;\n                    item.getChildByName(\"SprRank\").getComponent(cc.Sprite).spriteFrame = this.sfRanks[i];\n                    item.getChildByName(\"Rank\").active = false;\n                } else {\n                    item.getChildByName(\"Rank\").active = true;\n                    item.getChildByName(\"Rank\").getComponent(cc.Label).string = itemData[\"rank\"];\n                    item.getChildByName(\"SprRank\").active = false;\n                }\n                let lblNickname: cc.Label = item.getChildByName(\"Nickname\").getComponent(cc.Label);\n                let lblScore: cc.Label = item.getChildByName(\"Score\").getComponent(cc.Label);\n                lblNickname.string = itemData[\"nickname\"];\n                lblScore.string = itemData[\"score\"];\n                if (i == 0) {\n                    lblNickname.node.color = cc.Color.BLACK.fromHEX(\"#ff7e00\");\n                    lblScore.node.color = cc.Color.BLACK.fromHEX(\"#ff7e00\");\n                } else if (i == 1) {\n                    lblNickname.node.color = cc.Color.BLACK.fromHEX(\"#004eff\");\n                    lblScore.node.color = cc.Color.BLACK.fromHEX(\"#004eff\");\n                } else if (i == 2) {\n                    lblNickname.node.color = cc.Color.BLACK.fromHEX(\"#06ff00\");\n                    lblScore.node.color = cc.Color.BLACK.fromHEX(\"#06ff00\");\n                } else {\n                    lblNickname.node.color = cc.Color.BLACK.fromHEX(\"#feca85\");\n                    lblScore.node.color = cc.Color.BLACK.fromHEX(\"#feca85\");\n                }\n                item.getChildByName(\"Divider\").active = i < res.length - 1;\n            }\n        });\n    }\n\n    public actTheLe() {\n        let url = Configs.App.DOMAIN + \"the_le_boom_tan.html\";\n        cc.sys.openURL(url);\n    }\n\n    private getGiftSpriteFrame(name: string): cc.SpriteFrame {\n        for (let i = 0; i < this.sfGifts.length; i++) {\n            if (this.sfGifts[i].name == name) return this.sfGifts[i];\n        }\n        return null;\n    }\n}\n"]}
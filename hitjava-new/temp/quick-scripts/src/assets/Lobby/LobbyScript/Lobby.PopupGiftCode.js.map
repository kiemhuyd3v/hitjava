{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Lobby.PopupGiftCode.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport Configs from \"../../Loading/src/Configs\";\nimport { Global } from \"../../Loading/src/Global\";\nimport Http from \"../../Loading/src/Http\";\nimport App from \"./Script/common/App\";\nimport BroadcastReceiver from \"./Script/common/BroadcastReceiver\";\nimport Dialog from \"./Script/common/Dialog\";\nimport Utils from \"./Script/common/Utils\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PopupGiftCode extends Dialog {\n\n    @property(cc.EditBox)\n    edbCode: cc.EditBox = null;\n\n    start() {\n\n    }\n\n    show() {\n        super.show();\n        this.edbCode.string = \"\";\n    }\n\n    actSubmit() {\n        let code = this.edbCode.string.trim();\n        if (code == \"\") {\n            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_giftcode_blank'));\n            return;\n        }\n        App.instance.showLoading(true);\n        Http.get(Configs.App.API, { c: \"19\", un: Configs.Login.Nickname, giftcode: code }, (err, res) => {\n            App.instance.showLoading(false);\n            if (err != null) return;\n            //Utils.Log(\"Giftcode:\" + JSON.stringify(res));\n            if (res.success == true) {\n                Configs.Login.Coin = res.currentMoney;\n                BroadcastReceiver.send(BroadcastReceiver.USER_UPDATE_COIN);\n                App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_giftcode_success'));\n            }\n            else {\n                if (res.errorCode == 1) {\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_giftcode_expired'));\n                }\n                else if (res.errorCode == 2) {\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_giftcode_expired'));\n                }\n                else if (res.errorCode == 3) {\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_giftcode_not_suitable'));\n                }\n                else if (res.errorCode == 4) {\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_giftcode_used'));\n                }\n                else if (res.errorCode == 5) {\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_giftcode_used_event'));\n                }\n                else if (res.errorCode == 6) {\n                    App.instance.alertDialog.showMsgWithOnDismissed(App.instance.getTextLang('txt_giftcode_check_phone'), () => {\n                        Global.LobbyController.actSecurity();\n                    });\n                }\n                else if (res.errorCode == 100) {\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_giftcode_incorrect'));\n                }\n                else {\n                    App.instance.alertDialog.showMsg(res.message);\n\n                }\n            }\n        });\n    }\n}\n"]}
{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Lobby.PopupChangePassword.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport cmd from \"./Lobby.Cmd\";\nimport App from \"./Script/common/App\";\nimport Dialog from \"./Script/common/Dialog\";\nimport Utils from \"./Script/common/Utils\";\nimport MiniGameNetworkClient from \"./Script/networks/MiniGameNetworkClient\";\nimport InPacket from \"./Script/networks/Network.InPacket\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PopupChangePassword extends Dialog {\n    @property(cc.Node)\n    info: cc.Node = null;\n    @property(cc.Node)\n    continue: cc.Node = null;\n\n    @property(cc.EditBox)\n    edbOldPassword: cc.EditBox = null;\n    @property(cc.EditBox)\n    edbNewPassword: cc.EditBox = null;\n    @property(cc.EditBox)\n    edbReNewPassword: cc.EditBox = null;\n\n    @property(cc.EditBox)\n    edbOTP: cc.EditBox = null;\n\n    start() {\n        MiniGameNetworkClient.getInstance().addListener((data) => {\n            if (!this.node.active) return;\n            let inpacket = new InPacket(data);\n            switch (inpacket.getCmdId()) {\n                case cmd.Code.CHANGE_PASSWORD: {\n                    App.instance.showLoading(false);\n                    let res = new cmd.ResChangePassword(data);\n                     ////Utils.Log(\"res changepass:\", res);\n                    switch (res.error) {\n                        case 1:\n                            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_room_err6'));\n                            break;\n                        case 3:\n                            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_old_password_incorrect'));\n                            break;\n                        case 4:\n                            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_change_password_success'));\n                            break;\n                        default:\n                            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_unknown_error') + \"\\n\" + res.error);\n                            break;\n                    }\n                    break;\n                }\n                case cmd.Code.GET_OTP: {\n                    if (!this.node.active) return;\n                    App.instance.showLoading(false);\n                    let res = new cmd.ResGetOTP(data);\n                    if (res.error == 0) {\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_otp_send'));\n                    } else if (res.error == 30) {\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_otp_delay_time'));\n                    } else {\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_action_not_success'));\n                    }\n                    break;\n                }\n                case cmd.Code.SEND_OTP: {\n                    let res = new cmd.ResSendOTP(data);\n                    App.instance.showLoading(false);\n                    switch (res.error) {\n                        case 0:\n                            break;\n                        case 1:\n                        case 2:\n                            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_error_exchange'));\n                            break;\n                        case 77:\n                        case 3:\n                            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_incorrect_otp'));\n                            break;\n                        case 4:\n                            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_expired_otp'));\n                            break;\n                        default:\n                            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_unknown_error') + \"\\n\" + res.error);\n                            break;\n                    }\n                    break;\n                }\n                case cmd.Code.RESULT_CHANGE_PASSWORD: {\n                    let res = new cmd.ResSendOTP(data);\n                    App.instance.showLoading(false);\n                    switch (res.error) {\n                        case 0:\n                            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_change_password_success'));\n                            this.dismiss();\n                            break;\n                        default:\n                            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_unknown_error') + \"\\n\" + res.error);\n                            break;\n                    }\n                    break;\n                }\n            }\n        }, this);\n    }\n\n    show() {\n        super.show();\n        this.info.active = true;\n        this.continue.active = false;\n        this.edbOldPassword.string = \"\";\n        this.edbNewPassword.string = \"\";\n        this.edbReNewPassword.string = \"\";\n        this.edbOTP.string = \"\";\n    }\n\n    actSubmit() {\n        let oldPassword = this.edbOldPassword.string.trim();\n        let newPassword = this.edbNewPassword.string.trim();\n        let reNewPassword = this.edbReNewPassword.string.trim();\n        if (oldPassword.length == 0) {\n            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_old_password_not_blank'));\n            return;\n        }\n        if (newPassword.length == 0) {\n            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_new_password_not_blank'));\n            return;\n        }\n        if (reNewPassword != newPassword) {\n            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_password_not_same'));\n            return;\n        }\n        App.instance.showLoading(true);\n        MiniGameNetworkClient.getInstance().send(new cmd.ReqChangePassword(oldPassword, newPassword));\n    }\n\n    actGetOTP() {\n        App.instance.showLoading(true);\n        MiniGameNetworkClient.getInstance().send(new cmd.ReqGetOTP());\n    }\n\n    actContinue() {\n        let otp = this.edbOTP.string.trim();\n        if (otp.length == 0) {\n            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_otp_blank'));\n            return;\n        }\n        App.instance.showLoading(true);\n        MiniGameNetworkClient.getInstance().send(new cmd.ReqSendOTP(otp, false ? 1 : 0));\n    }\n}\n"]}
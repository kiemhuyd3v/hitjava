{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Payment\\Lobby.PopupThes.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Dialog from \"../Script/common/Dialog\";\r\nimport cmd from \"../Lobby.Cmd\";\r\nimport InPacket from \"../Script/networks/Network.InPacket\";\r\nimport MiniGameNetworkClient2 from \"../Script/networks/MiniGameNetworkClient2\";\r\nimport Dropdown from \"../Script/common/Dropdown\";\r\nimport Configs from \"../../../Loading/src/Configs\";\r\nimport App from \"../Script/common/App\";\r\nimport Utils from \"../Script/common/Utils\";\r\nimport SPUtils from \"../Script/common/SPUtils\";\r\nimport Http from \"../../../Loading/src/Http\";\r\nimport BroadcastReceiver from \"../Script/common/BroadcastReceiver\";\r\n//import VersionConfig from \"../Script/common/VersionConfig\";\r\n//import ShootFishNetworkClient from \"../Script/networks/ShootFishNetworkClient\";\r\nconst { ccclass, property } = cc._decorator;\r\n@ccclass\r\nexport default class TabBanks extends Dialog {\r\n    @property(cc.Node)\r\n    itemFactorTemplate: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    lblBankNumber: cc.Label = null;\r\n    @property(cc.Label)\r\n    lblBankAccountName: cc.Label = null;\r\n    @property(cc.Label)\r\n    lblBankAddress: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lblTransNote: cc.Label = null;\r\n\t@property(cc.Button)\r\n    btnCopy: cc.Button = null;\r\n\t@property(cc.Button)\r\n    btnCopyND: cc.Button = null;\r\n    \r\n\r\n    @property(Dropdown)\r\n    dropdownBank: Dropdown = null;\r\n\r\n    @property(cc.EditBox)\r\n    edbAmount: cc.EditBox = null;\r\n    private _listBank = [];\r\n\r\n    start() {\r\n        this.lblTransNote.string = \"Nap \"+Configs.Login.Nickname;\r\n        App.instance.showLoading(true);\r\n        Http.get(Configs.App.API, { \"c\": 130 }, (err, res) => {\r\n            App.instance.showLoading(false);\r\n            if (err == null) {\r\n                if(res.list_bank === undefined || res.list_bank.length == 0){\r\n\r\n                    return;\r\n                }\r\n\r\n                let listBank = res.list_bank;\r\n                this._listBank = listBank;\r\n                let bankName = [\"Chọn ngân hàng\"];\r\n                for(let i = 0; i < listBank.length; i ++){\r\n                    bankName.push(listBank[i].bankName);\r\n                }\r\n                this.dropdownBank.setOptions(bankName);\r\n                this.dropdownBank.setOnValueChange((idx) => {\r\n                    if(idx > 0){\r\n                       // this.lblBankAddress.string = listBank[idx - 1].bankAddress;\r\n                        this.lblBankAccountName.string = listBank[idx - 1].bankAccountName;\r\n                        this.lblBankNumber.string = listBank[idx - 1].bankNumber;\r\n                    }else {\r\n                       // this.lblBankAddress.string = \"\";\r\n                        this.lblBankAccountName.string = \"\";\r\n                        this.lblBankNumber.string = \"\";\r\n                    }\r\n                    \r\n        \r\n                })\r\n            }\r\n        });\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tthis.btnCopy.node.on(\"click\", ()=> {\r\n            if (this.lblBankNumber.string.length > 0) {\r\n                \r\n                    SPUtils.copyToClipboard(this.lblBankNumber.string);\r\n\t\t\t\t\tApp.instance.alertDialog.showMsg(\"Đã sao chép số tài khoản.\");\r\n                \r\n            } else {\r\n                App.instance.alertDialog.showMsg(\"Chưa có số tài khoản.\");  \r\n            }\r\n        });\r\n\t\tthis.btnCopyND.node.on(\"click\", ()=> {\r\n            if (this.lblTransNote.string.length > 0) {\r\n                SPUtils.copyToClipboard(this.lblTransNote.string);\r\n\t\t\t\t\tApp.instance.alertDialog.showMsg(\"Đã sao chép nội dung.\");\r\n                \r\n            } else {\r\n                App.instance.alertDialog.showMsg(\"Chưa có nội dung.\");  \r\n            }\r\n        });\r\n        \r\n    }\r\n\r\n    submit() {\r\n        let ddBank = this.dropdownBank.getValue();\r\n        if (ddBank == 0) {\r\n            App.instance.alertDialog.showMsg(\"Vui lòng chọn ngân hàng.\");\r\n            return;\r\n        }\r\n        let bankSelected = this._listBank[ddBank - 1].bankNumber;\r\n        \r\n        let amountSt = this.edbAmount.string.trim();\r\n        let amount = Number(amountSt);\r\n        if(isNaN(amount) || amount <= 0){\r\n            App.instance.alertDialog.showMsg(\"Số tiền nạp không hợp lệ\");\r\n            return;\r\n        }\r\n\r\n        \r\n        \r\n        App.instance.showLoading(true);\r\n        MiniGameNetworkClient.getInstance().send(new cmd.ReqDepositBank(bankSelected, amount));\r\n    }\r\n\tonBtnXacNhan() {\r\n        if (this.node.active) {\r\n\t\t\r\n        \r\n\t\t\r\n            var money = Utils.formatEditBox(this.edbAmount.string);\r\n\t\t\t//let ddBank = this.dropdownBank.getValue();\r\n\t\t\tlet ddBank = this.dropdownBank.getValue();\r\n\t\t\tif (ddBank == 1) {\r\n            \r\n\t\t\tvar bank = \"VietcomBank\"\r\n        }\r\n\t\tif (ddBank == 2) {\r\n            \r\n\t\t\tvar bank = \"VietinBank\"\r\n        }\r\n\t\tif (ddBank == 3) {\r\n            \r\n\t\t\tvar bank = \"TPBank\"\r\n        }\r\n\t\tif (ddBank == 4) {\r\n            \r\n\t\t\tvar bank = \"TechcomBank\"\r\n        }\r\n\t\tif (ddBank == 5) {\r\n            \r\n\t\t\tvar bank = \"BIDV\"\r\n        }\r\n\t\tif (ddBank == 6) {\r\n            \r\n\t\t\tvar bank = \"SacomBank\"\r\n        }\r\n            //var bankNumber = this.editBankNumber.string.trim();\r\n            if (money == \"\" || ddBank == null) {\r\n                App.instance.ShowAlertDialog(App.instance.getTextLang(\"txt_input_all\"));\r\n                return;\r\n            }\r\n            if (money < 100000) {\r\n                App.instance.ShowAlertDialog(App.instance.getTextLang(\"txt_cash_in_min\") + \" 100.000\");\r\n                return;\r\n            }\r\n            if (money > 300000000) {\r\n                App.instance.ShowAlertDialog(App.instance.getTextLang(\"txt_cash_in_max\") + \" 300.000.000\");\r\n                return;\r\n            }\r\n            var self = this;\r\n            App.instance.showLoading(true, -1);\r\n            //Utils.Log(\"chuyen khoan:\" + encodeURIComponent(this.editName.string.trim()));\r\n            var request = {\r\n                \"c\": 2003,\r\n                \"fn\": encodeURIComponent(ddBank),\r\n                \"am\": money,\r\n                \"pt\": 1,\r\n                \"nn\": Configs.Login.Nickname,\r\n                \"at\": Configs.Login.AccessToken,\r\n                \"pn\": \"manualbank\",\r\n                \"bc\": bank,\r\n                \"ds\": Configs.Login.Nickname,\r\n                \"bn\": money\r\n            };\r\n            //this.lbTransMsg.string = request['ds'];\r\n            Http.get(Configs.App.API, request, (err, res) => {\r\n                App.instance.showLoading(false);\r\n                cc.log(res);\r\n                if (res.success == true) {\r\n                    App.instance.ShowAlertDialog(\"Gửi thông tin nạp tiền thành công!\");\r\n                }\r\n                else {\r\n                    App.instance.ShowAlertDialog(res.message);\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    \r\n\r\n    \r\n}\r\n\r\n "]}
{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Script\\common\\RestApi.js"],"names":["RestApi","CallGet","api","data","callbackSuccess","url","console","log","xhr","cc","loader","getXMLHttpRequest","open","onreadystatechange","readyState","status","responseText","send","CallPost","token","JSON","stringify","XMLHttpRequest","setRequestHeader","module","exports"],"mappings":";;;;;;AAAI;AACA,IAAIA,OAAO,GAAG;AAEVC,EAAAA,OAAO,EAAE,iBAAUC,GAAV,EAAeC,IAAf,EAAqBC,eAArB,EAAsC;AAC3C,QAAIC,GAAG,GAAGH,GAAV,CAD2C,CAC5B;;AACfI,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAWF,GAAvB;AACA,QAAIG,GAAG,GAAGC,EAAE,CAACC,MAAH,CAAUC,iBAAV,EAAV,CAH2C,CAGH;;AACxCH,IAAAA,GAAG,CAACI,IAAJ,CAAS,KAAT,EAAgBP,GAAhB,EAAqB,IAArB,EAJ2C,CAK3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAG,IAAAA,GAAG,CAACK,kBAAJ,GAAyB,YAAY;AACjC,UAAIL,GAAG,CAACM,UAAJ,IAAkB,CAAlB,IAAwBN,GAAG,CAACO,MAAJ,IAAc,GAAd,IAAqBP,GAAG,CAACO,MAAJ,GAAa,GAA9D,EAAoE;AAChEX,QAAAA,eAAe,CAACI,GAAG,CAACQ,YAAL,CAAf;AACH;AACJ,KAJD;;AAMAR,IAAAA,GAAG,CAACS,IAAJ;AACH,GAvBS;AAyBVC,EAAAA,QAAQ,EAAE,kBAAUhB,GAAV,EAAeC,IAAf,EAAqBC,eAArB,EAAsCe,KAAtC,EAAkD;AAAA,QAAZA,KAAY;AAAZA,MAAAA,KAAY,GAAJ,EAAI;AAAA;;AACxD;AACA,QAAId,GAAG,GAAIH,GAAX;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAcF,GAAd,GAAoB,GAApB,GAA0Be,IAAI,CAACC,SAAL,CAAelB,IAAf,CAAtC;AACA,QAAIK,GAAG,GAAG,IAAIc,cAAJ,EAAV;AACAd,IAAAA,GAAG,CAACI,IAAJ,CAAS,MAAT,EAAiBP,GAAjB,EAAsB,IAAtB;AACAG,IAAAA,GAAG,CAACe,gBAAJ,CAAqB,cAArB,EAAqC,kBAArC;;AACA,QAAIJ,KAAK,IAAI,EAAb,EACA;AACIX,MAAAA,GAAG,CAACe,gBAAJ,CAAqB,eAArB,EAAsC,YAAYJ,KAAlD;AACH;;AACDX,IAAAA,GAAG,CAACK,kBAAJ,GAAyB,YAAY;AACjC,UAAIL,GAAG,CAACM,UAAJ,IAAkB,CAAlB,IAAwBN,GAAG,CAACO,MAAJ,IAAc,GAAd,IAAqBP,GAAG,CAACO,MAAJ,GAAa,GAA9D,EAAoE;AAChET,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsBL,GAAtB,GAA4B,GAA5B,GAAkCM,GAAG,CAACQ,YAAlD;AACAZ,QAAAA,eAAe,CAACI,GAAG,CAACQ,YAAL,CAAf;AACH;AACJ,KALD;;AAOAR,IAAAA,GAAG,CAACS,IAAJ,CAASG,IAAI,CAACC,SAAL,CAAelB,IAAf,CAAT;AACH;AA5CS,CAAd;AA+CAqB,MAAM,CAACC,OAAP,GAAiBzB,OAAjB","sourceRoot":"/","sourcesContent":["    // var UserModel = require(\"UserModel\");\n    var RestApi = {\n\n        CallGet: function (api, data, callbackSuccess) {\n            var url = api; //LINK_API + api;\n            console.log(\"CallGet:\"+url);\n            let xhr = cc.loader.getXMLHttpRequest();//new XMLHttpRequest();\n            xhr.open(\"GET\", url, true);\n            // xhr.setRequestHeader(\"Content-type\", \"application/json\");\n            // xhr.setRequestHeader(\"Access-Control-Allow-Origin\", \"*\");\n            // xhr.setRequestHeader(\"Access-Control-Allow-Credentials\", \"true\");\n            // xhr.setRequestHeader(\"Access-Control-Allow-Methods\", \"GET,HEAD,OPTIONS,POST,PUT\");\n            // xhr.setRequestHeader(\"Access-Control-Allow-Headers\", \"Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers\");\n            // if (UserModel.token != \"\")\n            // {\n            //     xhr.setRequestHeader(\"Authorization\", \"Bearer \" + UserModel.token);\n            // }\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\n                    callbackSuccess(xhr.responseText);\n                }\n            };\n            \n            xhr.send();\n        },\n\n        CallPost: function (api, data, callbackSuccess, token = \"\") {\n            // var url = LINK_API + api;\n            var url =  api;\n            console.log(\"CallPost:\" + url + \":\" + JSON.stringify(data));\n            let xhr = new XMLHttpRequest();\n            xhr.open(\"POST\", url, true);\n            xhr.setRequestHeader(\"Content-type\", \"application/json\");\n            if (token != \"\")\n            {\n                xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n            }\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\n                    console.log(\"Response Success:\" + api + \":\" + xhr.responseText);\n                    callbackSuccess(xhr.responseText);\n                }\n            };\n        \n            xhr.send(JSON.stringify(data));\n        }\n    };\n\n    module.exports = RestApi;"]}
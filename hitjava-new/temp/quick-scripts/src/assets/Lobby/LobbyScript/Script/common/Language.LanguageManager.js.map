{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Script\\common\\Language.LanguageManager.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C,IAAU,QAAQ,CAsDjB;AAtDD,WAAU,QAAQ;IAEd;QAAsC,oCAAY;QAAlD;YAAA,qEAkDC;YA7CG,UAAI,GAAiB,IAAI,CAAC;YAG1B,kBAAY,GAAG,IAAI,CAAC;YACZ,WAAK,GAAW,EAAE,CAAC;YACnB,eAAS,GAAe,EAAE,CAAC;;QAwCvC,CAAC;6BAlDY,gBAAgB;QAYzB,iCAAM,GAAN;YACI,kBAAgB,CAAC,QAAQ,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACxC,IAAI,QAAQ,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;YACvD,IAAI,QAAQ,IAAI,IAAI,EAAE;gBAClB,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;aAChC;QACL,CAAC;QAEM,sCAAW,GAAlB,UAAmB,YAAoB;YACnC,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;YACjC,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;YACtD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC5C,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBACjC,IAAI,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,MAAM,YAAY,MAAM,IAAI,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE;oBAC9E,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;iBACnC;qBAAM;oBACH,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC5B,CAAC,EAAE,CAAC;iBACP;aACJ;QACL,CAAC;QAEM,sCAAW,GAAlB,UAAmB,QAAwC,EAAE,MAAoB;YAC7E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;gBAChB,QAAQ,EAAE,QAAQ;gBAClB,MAAM,EAAE,MAAM;aACjB,CAAC,CAAC;QACP,CAAC;QAEM,oCAAS,GAAhB,UAAiB,EAAU;YACvB,IAAI,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE;gBAC/B,IAAI,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;oBAClD,OAAO,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;iBAC5C;aACJ;YACD,OAAO,EAAE,CAAC;QACd,CAAC;;QA/CM,yBAAQ,GAAqB,IAAI,CAAC;QAGzC;YADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;sDACG;QALjB,gBAAgB;YAD5B,OAAO;WACK,gBAAgB,CAkD5B;QAAD,uBAAC;KAlDD,AAkDC,CAlDqC,EAAE,CAAC,SAAS,GAkDjD;IAlDY,yBAAgB,mBAkD5B,CAAA;AAEL,CAAC,EAtDS,QAAQ,KAAR,QAAQ,QAsDjB;AACD,kBAAe,QAAQ,CAAC,gBAAgB,CAAC","file":"","sourceRoot":"/","sourcesContent":["\nconst { ccclass, property } = cc._decorator;\n\nnamespace Language {\n    @ccclass\n    export class LanguageMananger extends cc.Component {\n\n        static instance: LanguageMananger = null;\n\n        @property(cc.TextAsset)\n        json: cc.TextAsset = null;\n\n\n        languageCode = \"vi\";\n        private texts: Object = {};\n        private listeners: Array<any> = [];\n\n        onLoad() {\n            LanguageMananger.instance = this;\n            this.texts = JSON.parse(this.json.text);\n            let langCode = cc.sys.localStorage.getItem(\"langCode\");\n            if (langCode != null) {\n                this.languageCode = langCode;\n            }\n        }\n\n        public setLanguage(languageCode: string) {\n            this.languageCode = languageCode;\n            cc.sys.localStorage.setItem(\"langCode\", languageCode);\n            for (var i = 0; i < this.listeners.length; i++) {\n                var listener = this.listeners[i];\n                if (listener.target && listener.target instanceof Object && listener.target.node) {\n                    listener.callback(languageCode);\n                } else {\n                    this.listeners.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n\n        public addListener(callback: (languageCode: string) => void, target: cc.Component) {\n            this.listeners.push({\n                callback: callback,\n                target: target\n            });\n        }\n\n        public getString(id: string): string {\n            if (this.texts.hasOwnProperty(id)) {\n                if (this.texts[id].hasOwnProperty(this.languageCode)) {\n                    return this.texts[id][this.languageCode];\n                }\n            }\n            return id;\n        }\n    }\n\n}\nexport default Language.LanguageMananger;"]}
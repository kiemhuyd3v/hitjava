{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Script\\common\\Dialog.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAC5C,IAAI,EAAE,GAAG,EAAE,CAAC,KAAK,CAAA;AAEjB;IAAoC,0BAAY;IAAhD;QAAA,uEA8EC;QA7EG,kBAAU,GAAY,IAAI,CAAC;QAE3B,UAAE,GAAY,IAAI,CAAC;QAEnB,iBAAS,GAAY,IAAI,CAAC;QAC1B,iBAAS,GAAG,GAAG,CAAC;QAChB,kBAAU,GAAG,GAAG,CAAC;;IAuErB,CAAC;IArEG,qBAAI,GAAJ;QAAA,mBA+BC;QA9BG,0CAA0C;QAC1C,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QAC1D,IAAI,CAAC,IAAI,CAAC,EAAE;YAAE,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QACvD,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;QAC5E,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAExB,IAAI,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC;QACzB,IAAI,CAAC,EAAE,CAAC,OAAO,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;QACvC,IAAI,CAAC,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;QAEnC,mCAAmC;QACnC,8BAA8B;QAC9B,0CAA0C;QAC1C,wCAAwC;QACxC,iEAAiE;QACjE,0BAA0B;QAC1B,8CAA8C;QAC9C,MAAM;QACN,EAAE,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACzC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC;aACb,GAAG,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC;aAC3C,EAAE,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;aACpE,IAAI,CAAC;YACF,OAAI,CAAC,SAAS,EAAE,CAAC;QACrB,CAAC,CAAC;aACD,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC;IAChD,CAAC;IAED,wBAAO,GAAP;QAAA,mBAiBC;QAhBG,IAAI,CAAC,IAAI,CAAC,EAAE;YAAE,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QACvD,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;QAC5E,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAExB,IAAI,CAAC,EAAE,CAAC,cAAc,EAAE,CAAC;QACzB,IAAI,CAAC,EAAE,CAAC,OAAO,GAAG,GAAG,CAAC;QACtB,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;QAEnC,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;QAChC,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,GAAG,CAAC;QAC7B,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,CAAC,CAAC;QACzB,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;aACjF,IAAI,CAAC;YACF,OAAI,CAAC,YAAY,EAAE,CAAC;QACxB,CAAC,CAAC;aACD,KAAK,EAAE,CAAC;IACjB,CAAC;IAED,0BAAS,GAAT;QACI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;QAC1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC;SACzB;IACL,CAAC;IAED,6BAAY,GAAZ;QACI,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;QAE1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;SAC1B;QACD,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;IAC3B,CAAC;IA1ED;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sCACC;IAEnB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;6CACQ;IALT,MAAM;QAD1B,OAAO;OACa,MAAM,CA8E1B;IAAD,aAAC;CA9ED,AA8EC,CA9EmC,EAAE,CAAC,SAAS,GA8E/C;kBA9EoB,MAAM","file":"","sourceRoot":"/","sourcesContent":["import App from \"./App\";\n\nconst { ccclass, property } = cc._decorator;\nvar TW = cc.tween\n@ccclass\nexport default class Dialog extends cc.Component {\n    isAnimated: boolean = true;\n    @property(cc.Node)\n    bg: cc.Node = null;\n    @property(cc.Node)\n    container: cc.Node = null;\n    showScale = 1.0;\n    startScale = 0.7;\n\n    show(): void {\n        // this.node.parent = App.instance.canvas;\n        var _this = this;\n        this.node.setSiblingIndex(this.node.parent.childrenCount);\n        if (!this.bg) this.bg = this.node.getChildByName(\"Bg\");\n        if (!this.container) this.container = this.node.getChildByName(\"Container\");\n        this.node.active = true;\n        this.isAnimated = false;\n\n        this.bg.stopAllActions();\n        this.bg.opacity = 0;\n        this.bg.runAction(cc.fadeTo(0.2, 128));\n        this.bg.setContentSize(cc.winSize);\n\n        // this.container.stopAllActions();\n        // this.container.opacity = 0;\n        // this.container.scale = this.startScale;\n        // this.container.runAction(cc.sequence(\n        //     cc.spawn(cc.scaleTo(0.2, this.showScale), cc.fadeIn(0.2)),\n        //     cc.scaleTo(0.1, 1),\n        //     cc.callFunc(_this._onShowed.bind(this))\n        // ));\n        cc.Tween.stopAllByTarget(this.container);\n        TW(this.container)\n            .set({ opacity: 0, scale: this.startScale })\n            .to(0.3, { opacity: 255, scale: 1.0 }, { easing: cc.easing.backOut })\n            .call(() => {\n                this._onShowed();\n            })\n            .start();\n        this.node.zIndex = cc.macro.MAX_ZINDEX - 10;\n    }\n\n    dismiss() {\n        if (!this.bg) this.bg = this.node.getChildByName(\"Bg\");\n        if (!this.container) this.container = this.node.getChildByName(\"Container\");\n        this.isAnimated = false;\n\n        this.bg.stopAllActions();\n        this.bg.opacity = 128;\n        this.bg.runAction(cc.fadeOut(0.2));\n\n        this.container.stopAllActions();\n        this.container.opacity = 255;\n        this.container.scale = 1;\n        TW(this.container).to(0.3, { scale: 0.8, opacity: 150 }, { easing: cc.easing.backIn })\n            .call(() => {\n                this._onDismissed();\n            })\n            .start();\n    }\n\n    _onShowed() {\n        this.isAnimated = true;\n        var edits = this.node.getComponentsInChildren(cc.EditBox);\n        for (var i = 0; i < edits.length; i++) {\n            edits[i].tabIndex = 0;\n        }\n    }\n\n    _onDismissed() {\n        var edits = this.node.getComponentsInChildren(cc.EditBox);\n\n        for (var i = 0; i < edits.length; i++) {\n            edits[i].tabIndex = -1;\n        }\n        this.node.active = false;\n        this.isAnimated = true;\n    }\n}\n"]}
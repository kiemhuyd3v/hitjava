{"version":3,"sources":["assets\\Lobby\\LobbyScript\\Lobby.PopupForgetPassword.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Configs from \"../../Loading/src/Configs\";\nimport Http from \"../../Loading/src/Http\";\nimport App from \"./Script/common/App\";\nimport Dialog from \"./Script/common/Dialog\";\nimport Utils from \"./Script/common/Utils\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PopupForgetPassword extends Dialog {\n    @property(cc.Node)\n    info: cc.Node = null;\n    @property(cc.Node)\n    continue: cc.Node = null;\n\n    @property(cc.EditBox)\n    edbUsername: cc.EditBox = null;\n    @property(cc.EditBox)\n    edbCaptcha: cc.EditBox = null;\n    @property(cc.Sprite)\n    sprCaptcha: cc.Sprite = null;\n\n    @property(cc.EditBox)\n    edbOTP: cc.EditBox = null;\n    @property(cc.Toggle)\n    toggleAppOTP: cc.Toggle = null;\n\n    private captchaId;\n\n    show() {\n        super.show();\n        this.info.active = true;\n        this.continue.active = false;\n        this.toggleAppOTP.isChecked = false;\n        this.edbCaptcha.string = \"\";\n        this.edbUsername.string = \"\";\n        this.edbOTP.string = \"\";\n        this.actRefreshCaptcha();\n    }\n\n    public actRefreshCaptcha() {\n        Http.get(Configs.App.API, { \"c\": 124 }, (err, res) => {\n            if (err != null) {\n                App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_error'));\n                return;\n            }\n            this.captchaId = res[\"id\"];\n            Utils.loadSpriteFrameFromBase64(res[\"img\"], (sprFrame) => {\n                this.sprCaptcha.spriteFrame = sprFrame;\n            });\n        });\n    }\n\n    actSubmit() {\n        let username = this.edbUsername.string.trim();\n        let captcha = this.edbCaptcha.string.trim();\n        if (username.length == 0) {\n            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_username_not_blank'));\n            return;\n        }\n        if (captcha.length == 0) {\n            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_otp_blank'));\n            return;\n        }\n        Http.get(Configs.App.API, { \"c\": 127, \"un\": username, \"cp\": captcha, \"cid\": this.captchaId }, (err, res) => {\n            if (err != null) {\n                App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_unknown_error1'));\n                return;\n            }\n            switch (res[\"errorCode\"]) {\n                case \"115\":\n                    this.edbCaptcha.string = \"\";\n                    this.actRefreshCaptcha();\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_incorrect_otp'));\n                    break;\n                case \"116\":\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_notify_fast_action'));\n                    this.edbCaptcha.string = \"\";\n                    this.actRefreshCaptcha();\n                    break;\n                case \"1001\":\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_check_connect'));\n                    this.actRefreshCaptcha();\n                    break;\n                case \"1005\":\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_not_exsist'));\n                    this.edbCaptcha.string = \"\";\n                    this.actRefreshCaptcha();\n                    break;\n                case \"2001\":\n                    App.instance.alertDialog.showMsg(\"Hệ thống không hỗ trợ các tài khoản chưa cập nhật Nickname!\");\n                    this.edbCaptcha.string = \"\";\n                    this.actRefreshCaptcha();\n                    break;\n                case \"1023\":\n                    this.info.active = false;\n                    this.continue.active = true;\n                    break;\n                default:\n                    App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_unknown_error') + \"\\n\" + res[\"errorCode\"]);\n                    this.edbCaptcha.string = \"\";\n                    this.actRefreshCaptcha();\n                    break;\n            }\n        });\n    }\n\n    actContinue() {\n        let username = this.edbUsername.string.trim();\n        let otp = this.edbOTP.string.trim();\n        if (otp.length == 0) {\n            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_otp_blank'));\n            return;\n        }\n        Http.get(Configs.App.API, { \"c\": 128, \"un\": username, \"otp\": otp, \"type\": (this.toggleAppOTP.isChecked ? 1 : 0) }, (err, res) => {\n            if (err != null) {\n                App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_error'));\n                return;\n            }\n            if (!res[\"success\"]) {\n                switch (res[\"errorCode\"]) {\n                    case \"1001\":\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_room_err6'));\n                        break;\n                    case \"1008\":\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_incorrect_otp'));\n                        break;\n                    case \"1021\":\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_expired_otp'));\n                        break;\n                    case \"1022\":\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_login_account_expired_otp'));\n                        break;\n                    case \"1114\":\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_room_err6'));\n                        break;\n                    default:\n                        App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_unknown_error') + \"\\n\" + res[\"errorCode\"]);\n                        break;\n                }\n                return;\n            }\n            this.dismiss();\n            App.instance.alertDialog.showMsg(App.instance.getTextLang('txt_change_password_note'));\n        });\n    }\n}\n"]}
{"version":3,"sources":["assets\\Slot6\\Slot6Script\\Slot6.PopupBonus.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport Dialog from \"../../Lobby/LobbyScript/Script/common/Dialog\";\nimport Tween from \"../../Lobby/LobbyScript/Script/common/Tween\";\nimport Slot6Controller from \"./Slot6.Slot6Controller\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class PopupBonus extends Dialog {\n    @property(cc.Node)\n    items: cc.Node = null;\n    @property(cc.Node)\n    nodeBoxNotify: cc.Node = null;\n    @property(cc.Label)\n    txtNotify: cc.Label = null;\n    @property(cc.Label)\n    lblLeft: cc.Label = null;\n    @property(cc.Label)\n    lblFactor: cc.Label = null;\n    @property(cc.Label)\n    lblHeso: cc.Label = null;\n    @property(cc.Label)\n    lblWin: cc.Label = null;\n    private factor = 1;\n    private left = 0;\n    private betValue = 0;\n    private onFinished: () => void = null;\n    private onSpecialFinished: () => void = null;\n    private dataBonus: Array<number> = [];\n    private dataSpecial: number = -1;\n    private heso:number = 0;\n    private win : number = 0;\n    private controller:Slot6Controller = null;\n    start() {\n        var seft = this;\n        for (let i = 0; i < this.items.childrenCount; i++) {\n            let node = this.items.children[i];\n            node[\"btn\"] = node.getChildByName(\"btn\").getComponent(cc.Button);\n            node[\"label\"] = node.getChildByName(\"win\").getComponentInChildren(cc.Label);\n            node[\"miss\"] = node.getChildByName(\"miss\");\n            node[\"btn\"].node.active = true;\n            node[\"miss\"].active = false;\n            node[\"label\"].node.parent.active = false;\n            node[\"btn\"].node.on(\"click\", () => {\n                seft.controller.onBtnSoundTouchBonus();\n                var value = seft.dataBonus[seft.dataBonus.length - seft.left];\n                if(node[\"is_open\"] == false && seft.left > 0){\n                    node[\"is_open\"] = true;\n                    switch (value) {\n                        case 0:\n                            seft.factor++;\n                            seft.lblFactor.string = \"X\" + seft.factor+\"\";\n                            node[\"btn\"].node.active = false;\n                            node[\"miss\"].active = true;\n                            break;\n                        case 1:\n                            node[\"miss\"].active = false;\n                            node[\"btn\"].node.active = false;\n                            node[\"label\"].node.parent.active = true;\n                            node[\"label\"].string = \"0\";\n                            Tween.numberTo(node[\"label\"], 4*seft.betValue , 0.3);\n                            seft.win += 4* seft.betValue;\n                            Tween.numberTo(seft.lblWin,seft.win, 0.3);\n                            break;\n                       \n                        case 2:\n                            node[\"miss\"].active = false;\n                            node[\"btn\"].node.active = false;\n                            node[\"label\"].node.parent.active = true;\n                            node[\"label\"].string = \"0\";\n                            Tween.numberTo(node[\"label\"],10* seft.betValue * seft.factor, 0.3);\n                            seft.win += 10* seft.betValue * seft.factor;\n                            Tween.numberTo(seft.lblWin,seft.win, 0.3);\n                            break;\n                        case 3:\n                            node[\"miss\"].active = false;\n                            node[\"btn\"].node.active = false;\n                            node[\"label\"].node.parent.active = true;\n                            node[\"label\"].string = \"0\";\n                            Tween.numberTo(node[\"label\"],15* seft.betValue * seft.factor, 0.3);\n                            seft.win += 15* seft.betValue * seft.factor;\n                            Tween.numberTo(seft.lblWin,seft.win, 0.3);\n                            break;\n                        case 4:\n                            node[\"miss\"].active = false;\n                            node[\"btn\"].node.active = false;\n                            node[\"label\"].node.parent.active = true;\n                            node[\"label\"].string = \"0\";\n                            seft.win += 20* seft.betValue * seft.factor;\n                            Tween.numberTo(node[\"label\"],20* seft.betValue * seft.factor, 0.3);\n                            Tween.numberTo(seft.lblWin,seft.win, 0.3);\n                            break;\n                        \n\n                    }\n                    seft.left--;\n                    seft.lblLeft.string = \"\" + seft.left;\n                    if (seft.left <= 0) {\n                        seft.hidden();\n                    }\n                }\n            });\n        }\n\n       \n    }\n\n    showBonus(betValue: number, bonus: string,controller, onFinished: () => void) {\n        super.show();\n        this.controller = controller;\n        this.win = 0;\n        Tween.numberTo(this.lblWin,this.win, 0.3);\n        for (let i = 0; i < this.items.childrenCount; i++) {\n            let node = this.items.children[i];\n            node[\"btn\"] = node.getChildByName(\"btn\").getComponent(cc.Button);\n            node[\"label\"] = node.getChildByName(\"win\").getComponentInChildren(cc.Label);\n            node[\"miss\"] = node.getChildByName(\"miss\");\n           \n            node[\"btn\"].node.active = true;\n            node[\"label\"].node.parent.active = true;\n            node[\"miss\"].active = false;\n            node[\"is_open\"] = false;\n        }\n        for (let i = 0; i < this.items.childrenCount; i++) {\n            let node = this.items.children[i];\n            let btn = node.getChildByName(\"btn\").getComponent(cc.Button);\n            btn.node.active = true;\n            btn.interactable = true;\n            node.getChildByName(\"win\").active = false;\n        }\n        this.betValue = betValue;\n        this.onFinished = onFinished;\n        let arrBonus = bonus.split(\",\");\n        this.dataBonus = [];\n        for (let i = 0; i < arrBonus.length; i++) {\n            this.dataBonus.push(Number(arrBonus[i]));\n        }\n        this.left = this.dataBonus.length - 1;\n        this.factor = 1;\n        this.lblLeft.string = \"\" + this.left;\n        this.lblFactor.string = \"X\" + this.factor+\"\";\n        this.heso = this.dataBonus[0];\n        if (this.lblHeso != null)\n            this.lblHeso.string = \"x\"+this.heso;\n    }\n\n    \n    hidden() {\n        this.scheduleOnce(() => {\n            this.dismiss();\n            this.onFinished();\n        }, 1.5);\n        // this.controller.onBtnSoundSumary();\n        // Tween.showPopup(this.nodeBoxNotify,this.nodeBoxNotify.parent);\n        // Tween.numberTo(this.txtNotify,this.win, 0.3);\n        \n    }\n\n    onBtnExit(){\n        Tween.hidePopup(this.nodeBoxNotify,this.nodeBoxNotify.parent,false);\n        this.scheduleOnce(() => {\n            this.dismiss();\n            this.onFinished();\n        }, 1.5);\n    }\n}\nexport default PopupBonus;"]}